<!-- TURBO-AI-RULES:BEGIN -->

<!-- Generated by Turbo AI Rules at 2025-12-27T12:23:09.119Z -->
<!-- Total rules: 3 -->

# AI Coding Rules for Windsurf

> This file is automatically generated by Turbo AI Rules extension.
> **Windsurf**: Codeium AI IDE
> **Website**: https://codeium.com/windsurf

## Table of Contents

- [Python Development Skills](#python-development-skills)
- [TypeScript Development Skills](#typescript-development-skills)
- [Debugging Skills](#debugging-skills)

---

<!-- BEGIN_SOURCE source="turbo-skills-source" count="3" -->

<!-- BEGIN_RULE source="turbo-skills-source" id="1301" priority="medium" -->
# Python Development Skills
| Property | Value |
|----------|-------|
| id | 1301 |
| title | Python Development Skills |
| description | Python development best practices and coding skills |
| globs | `**/*.py` |
| priority | medium |
| tags | `python`, `skills`, `development`, `best-practices` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## Core Competencies

### 1. Code Organization

- Use virtual environments (venv, conda) for dependency isolation
- Follow PEP 8 style guide for consistent code formatting
- Organize modules by functionality, not file type
- Use `__init__.py` for package initialization
- Keep modules focused and cohesive (< 500 lines)

### 2. Type Hints and Documentation

```python
from typing import List, Optional, Dict

def process_data(
    items: List[str],
    config: Optional[Dict[str, any]] = None
) -> Dict[str, int]:
    """
    Process items with optional configuration.

    Args:
        items: List of strings to process
        config: Optional configuration dictionary

    Returns:
        Dictionary mapping items to counts

    Raises:
        ValueError: If items is empty
    """
    if not items:
        raise ValueError("Items list cannot be empty")

    return {item: len(item) for item in items}
```

### 3. Error Handling

- Use specific exception types
- Provide context in error messages
- Clean up resources with `try-finally` or context managers
- Log errors appropriately

```python
import logging

logger = logging.getLogger(__name__)

def safe_division(a: float, b: float) -> Optional[float]:
    """Safely divide two numbers."""
    try:
        return a / b
    except ZeroDivisionError:
        logger.error(f"Division by zero: {a} / {b}")
        return None
    except TypeError as e:
        logger.error(f"Invalid types for division: {e}")
        return None
```

### 4. Testing Practices

- Write unit tests with pytest or unittest
- Use fixtures for test setup
- Test edge cases and error conditions
- Aim for > 80% code coverage

```python
import pytest

def test_process_data_empty_list():
    """Test that empty list raises ValueError."""
    with pytest.raises(ValueError, match="cannot be empty"):
        process_data([])

def test_process_data_success():
    """Test successful data processing."""
    result = process_data(["hello", "world"])
    assert result == {"hello": 5, "world": 5}
```

### 5. Performance Optimization

- Use list comprehensions over loops when appropriate
- Leverage built-in functions and standard library
- Profile code before optimizing (cProfile, timeit)
- Consider generators for large datasets

```python
# Good: List comprehension
squares = [x**2 for x in range(1000)]

# Better for large data: Generator
squares_gen = (x**2 for x in range(1000000))
```

## Best Practices

1. **Dependency Management**: Use `requirements.txt` or `pyproject.toml`
2. **Code Quality**: Use linters (pylint, flake8) and formatters (black, ruff)
3. **Security**: Validate user input, use secrets module for sensitive data
4. **Async Programming**: Use asyncio for I/O-bound operations
5. **Data Processing**: Leverage pandas, numpy for efficient data manipulation

## Common Patterns

### Context Managers

```python
from contextlib import contextmanager

@contextmanager
def open_file_safely(filepath: str):
    """Safely open and close a file."""
    f = open(filepath, 'r')
    try:
        yield f
    finally:
        f.close()
```

### Decorators

```python
import functools
import time

def timing_decorator(func):
    """Measure function execution time."""
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start = time.perf_counter()
        result = func(*args, **kwargs)
        end = time.perf_counter()
        print(f"{func.__name__} took {end-start:.4f}s")
        return result
    return wrapper
```

## Resources

- PEP 8: Python Style Guide
- Real Python: Comprehensive tutorials
- Python Docs: Official documentation
- pytest: Testing framework
<!-- END_RULE -->

---

<!-- BEGIN_RULE source="turbo-skills-source" id="1302" priority="medium" -->
# TypeScript Development Skills
| Property | Value |
|----------|-------|
| id | 1302 |
| title | TypeScript Development Skills |
| description | TypeScript development best practices and advanced patterns |
| globs | `**/*.ts`, `**/*.tsx` |
| priority | medium |
| tags | `typescript`, `skills`, `development`, `best-practices` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## 核心能力

### 类型系统

```typescript
// Union 和 Intersection
type Status = "pending" | "approved" | "rejected";
type User = { name: string } & { id: number };

// 泛型
function identity<T>(value: T): T {
  return value;
}

// 条件类型
type IsString<T> = T extends string ? true : false;
```

### Discriminated Unions

```typescript
type Success = { status: "success"; data: any };
type Error = { status: "error"; message: string };
type Result = Success | Error;

function handleResult(result: Result) {
  if (result.status === "success") {
    console.log(result.data); // TypeScript 知道是 Success
  } else {
    console.error(result.message); // TypeScript 知道是 Error
  }
}
```

### Type Guards

```typescript
function isString(value: unknown): value is string {
  return typeof value === "string";
}
```

### 异步模式

```typescript
async function fetchData<T>(url: string): Promise<T> {
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    return (await response.json()) as T;
  } catch (error) {
    console.error("Fetch failed:", error);
    throw error;
  }
}

// 并发请求
await Promise.all(urls.map((url) => fetchData<T>(url)));
```

### 模块组织

```typescript
// 使用 barrel exports (index.ts)
export * from "./types";
export { DataService } from "./DataService";

// 路径别名
import { DataService } from "@/services/DataService";
```

## tsconfig.json 配置

```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  }
}
```

## 测试

```typescript
import { describe, it, expect } from "vitest";

describe("DataService", () => {
  it("should fetch data", async () => {
    const data = await service.getData();
    expect(data).toBeDefined();
  });
});
```

## 性能提示

1. 使用 const assertions: `const data = { x: 10 } as const;`
2. 启用增量编译: `incremental: true`
3. 优化导入: 直接导入而非 barrel exports（大项目）

## 常见陷阱

- 避免 `any`，使用 `unknown`
- 避免 `!` 非空断言，使用 null 检查
- `Object.keys()` 返回 `string[]`，非 `keyof T`

## 工具

- ESLint + @typescript-eslint
- Prettier
- Vitest
<!-- END_RULE -->

---

<!-- BEGIN_RULE source="turbo-skills-source" id="1303" priority="high" -->
# Debugging Skills
| Property | Value |
|----------|-------|
| id | 1303 |
| title | Debugging Skills |
| description | Effective debugging techniques and strategies |
| globs | `**/*` |
| priority | high |
| tags | `debugging`, `skills`, `troubleshooting`, `problem-solving` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## Systematic Approach

1. **复现问题**：记录步骤、环境因素、最小复现用例
2. **收集信息**：战略性日志、debugger 语句、堆栈追踪
3. **形成假设**：可能原因、最近变更、数据流
4. **测试验证**：一次一个变更、git bisect、断言验证

## 项目调试工具配置

### VS Code Debugger

```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug TypeScript",
      "program": "${workspaceFolder}/src/index.ts",
      "preLaunchTask": "npm: build",
      "sourceMaps": true,
      "outFiles": ["${workspaceFolder}/dist/**/*.js"]
    }
  ]
}
```

### 关键命令

```bash
# Node.js 调试
node --inspect-brk index.js

# Git bisect 定位回归
git bisect start && git bisect bad HEAD && git bisect good v1.0.0
```

## 常见问题模式

### 内存泄漏

```typescript
// 移除事件监听器
window.addEventListener("resize", handler);
window.removeEventListener("resize", handler);

// 清理定时器
const timerId = setInterval(fn, 1000);
clearInterval(timerId);
```

### 竞态条件

```typescript
let isProcessing = false;
async function handleClick() {
  if (isProcessing) return;
  isProcessing = true;
  try {
    await processData();
  } finally {
    isProcessing = false;
  }
}
```

### 类型错误

```typescript
function isUser(obj: unknown): obj is User {
  return typeof obj === "object" && obj !== null && "name" in obj;
}
```

## 项目日志规范

```typescript
import { Logger } from "@ygqygq2/vscode-log";

const logger = new Logger("MyModule");

function processData(data: any) {
  logger.info("Processing started", { dataSize: data.length });
  try {
    const result = transform(data);
    logger.info("Processing completed", { resultSize: result.length });
    return result;
  } catch (error) {
    logger.error("Processing failed", {
      error: error.message,
      stack: error.stack,
      data: JSON.stringify(data).slice(0, 100),
    });
    throw error;
  }
}
```

## 性能分析

```typescript
// Performance API
performance.mark("start");
await expensiveOperation();
performance.mark("end");
performance.measure("op", "start", "end");

// Network 请求拦截器
async function fetchWithLogging(url: string, options?: RequestInit) {
  const start = performance.now();
  const response = await fetch(url, options);
  console.log(`[${url}] ${performance.now() - start}ms`);
  return response;
}
```
<!-- END_RULE -->

<!-- END_SOURCE source="turbo-skills-source" -->

<!-- TURBO-AI-RULES:END -->