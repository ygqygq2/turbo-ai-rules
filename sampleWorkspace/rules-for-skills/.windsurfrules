<!-- Generated by Turbo AI Rules at 2025-12-27T09:22:52.089Z -->
<!-- Total rules: 2 | Sources: turbo-skills-source -->


<!-- TURBO-AI-RULES:BEGIN -->

<!-- Generated by Turbo AI Rules at 2025-12-27T09:22:52.088Z -->
<!-- Total rules: 2 -->

# AI Coding Rules for Windsurf

> This file is automatically generated by Turbo AI Rules extension.
> **Windsurf**: Codeium AI IDE with advanced context understanding
> **Website**: https://codeium.com/windsurf

## Table of Contents

- [Python Development Skills](#python-development-skills)
- [Code Review Skills](#code-review-skills)

---

<!-- BEGIN_SOURCE source="turbo-skills-source" count="2" -->

<!-- BEGIN_RULE source="turbo-skills-source" id="1301" priority="medium" -->
# Python Development Skills
| Property | Value |
|----------|-------|
| id | 1301 |
| title | Python Development Skills |
| description | Python development best practices and coding skills |
| globs | `**/*.py` |
| priority | medium |
| tags | `python`, `skills`, `development`, `best-practices` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## Core Competencies

### 1. Code Organization

- Use virtual environments (venv, conda) for dependency isolation
- Follow PEP 8 style guide for consistent code formatting
- Organize modules by functionality, not file type
- Use `__init__.py` for package initialization
- Keep modules focused and cohesive (< 500 lines)

### 2. Type Hints and Documentation

```python
from typing import List, Optional, Dict

def process_data(
    items: List[str],
    config: Optional[Dict[str, any]] = None
) -> Dict[str, int]:
    """
    Process items with optional configuration.

    Args:
        items: List of strings to process
        config: Optional configuration dictionary

    Returns:
        Dictionary mapping items to counts

    Raises:
        ValueError: If items is empty
    """
    if not items:
        raise ValueError("Items list cannot be empty")

    return {item: len(item) for item in items}
```

### 3. Error Handling

- Use specific exception types
- Provide context in error messages
- Clean up resources with `try-finally` or context managers
- Log errors appropriately

```python
import logging

logger = logging.getLogger(__name__)

def safe_division(a: float, b: float) -> Optional[float]:
    """Safely divide two numbers."""
    try:
        return a / b
    except ZeroDivisionError:
        logger.error(f"Division by zero: {a} / {b}")
        return None
    except TypeError as e:
        logger.error(f"Invalid types for division: {e}")
        return None
```

### 4. Testing Practices

- Write unit tests with pytest or unittest
- Use fixtures for test setup
- Test edge cases and error conditions
- Aim for > 80% code coverage

```python
import pytest

def test_process_data_empty_list():
    """Test that empty list raises ValueError."""
    with pytest.raises(ValueError, match="cannot be empty"):
        process_data([])

def test_process_data_success():
    """Test successful data processing."""
    result = process_data(["hello", "world"])
    assert result == {"hello": 5, "world": 5}
```

### 5. Performance Optimization

- Use list comprehensions over loops when appropriate
- Leverage built-in functions and standard library
- Profile code before optimizing (cProfile, timeit)
- Consider generators for large datasets

```python
# Good: List comprehension
squares = [x**2 for x in range(1000)]

# Better for large data: Generator
squares_gen = (x**2 for x in range(1000000))
```

## Best Practices

1. **Dependency Management**: Use `requirements.txt` or `pyproject.toml`
2. **Code Quality**: Use linters (pylint, flake8) and formatters (black, ruff)
3. **Security**: Validate user input, use secrets module for sensitive data
4. **Async Programming**: Use asyncio for I/O-bound operations
5. **Data Processing**: Leverage pandas, numpy for efficient data manipulation

## Common Patterns

### Context Managers

```python
from contextlib import contextmanager

@contextmanager
def open_file_safely(filepath: str):
    """Safely open and close a file."""
    f = open(filepath, 'r')
    try:
        yield f
    finally:
        f.close()
```

### Decorators

```python
import functools
import time

def timing_decorator(func):
    """Measure function execution time."""
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start = time.perf_counter()
        result = func(*args, **kwargs)
        end = time.perf_counter()
        print(f"{func.__name__} took {end-start:.4f}s")
        return result
    return wrapper
```

## Resources

- PEP 8: Python Style Guide
- Real Python: Comprehensive tutorials
- Python Docs: Official documentation
- pytest: Testing framework
<!-- END_RULE -->

---

<!-- BEGIN_RULE source="turbo-skills-source" id="1304" priority="medium" -->
# Code Review Skills
| Property | Value |
|----------|-------|
| id | 1304 |
| title | Code Review Skills |
| description | Effective code review practices and guidelines |
| globs | `**/*` |
| priority | medium |
| tags | `code-review`, `skills`, `best-practices`, `collaboration` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## Review Objectives

1. **Find Defects**: 识别 bug、逻辑错误、边界情况
2. **Ensure Quality**: 代码风格、可读性、可维护性
3. **Share Knowledge**: 学习和教授最佳实践
4. **Maintain Standards**: 强制团队约定和模式

## Review Checklist

- [ ] 功能正确、边界处理、错误处理、测试通过
- [ ] 设计：SOLID 原则、分离关注点、模式一致性
- [ ] 代码质量：风格一致、命名有意义、函数 < 50 行、无重复、注释说"为什么"
- [ ] 安全：输入验证、SQL 注入、XSS、敏感数据、认证授权
- [ ] 性能：无明显瓶颈、查询优化、缓存、异步操作
- [ ] 测试：单元测试、边界测试、覆盖率 > 80%

## Review Etiquette

### 评论模板

```
✅ Good: "Consider using a Map here for O(1) lookups. This will improve
performance when the dataset grows."

❌ Bad: "This is slow. Use a Map."

✅ Good: "I see you're handling the error here. Could we also log it?
logger.error('Failed to fetch', error)"

❌ Bad: "You forgot to log the error."
```

### 评论前缀

```typescript
// [BLOCKER] - 必须修复
// [SUGGESTION] - 可选建议
// [QUESTION] - 需要澄清
// [NITPICK] - 小样式问题
// [PRAISE] - 认可好的工作

// 示例:
// [BLOCKER] This will cause null pointer exception when user is undefined.
// Need null check before accessing user.name.

// [SUGGESTION] Consider extracting this logic into a separate function
// for better testability.
```

## PR Description Template

```markdown
## What

简要描述变更

## Why

业务原因或技术动机

## How

高层实现方法

## Testing

如何测试此变更

## Checklist

- [ ] 测试已添加/更新
- [ ] 文档已更新
- [ ] Breaking changes 已记录
- [ ] 向后兼容
```

## Common Review Patterns

### 错误处理检查

```typescript
// ❌ 静默失败
async function fetchData() {
  try {
    return await api.getData();
  } catch {
    return null; // 错误被吞没
  }
}

// ✅ 正确错误处理
async function fetchData() {
  try {
    return await api.getData();
  } catch (error) {
    logger.error("Failed to fetch data", { error });
    throw new DataFetchError("Unable to retrieve data", { cause: error });
  }
}
```

### 边界情况检查

```typescript
// ❌ 未处理边界情况
function getFirstName(fullName: string): string {
  return fullName.split(" ")[0];
}

// ✅ 处理边界情况
function getFirstName(fullName: string): string {
  if (!fullName || typeof fullName !== "string") return "";
  const trimmed = fullName.trim();
  if (!trimmed) return "";
  return trimmed.split(/\s+/)[0];
}
```

### 性能问题检查

```typescript
// ❌ O(n²) 复杂度
function findDuplicates(items: string[]): string[] {
  return items.filter((item, index) => items.indexOf(item) !== index);
}

// ✅ O(n) 复杂度
function findDuplicates(items: string[]): string[] {
  const seen = new Set<string>();
  const duplicates = new Set<string>();
  for (const item of items) {
    if (seen.has(item)) duplicates.add(item);
    seen.add(item);
  }
  return Array.from(duplicates);
}
```

## Automated Tools

```json
{
  "scripts": {
    "lint": "eslint . --ext .ts,.tsx",
    "format": "prettier --write .",
    "type-check": "tsc --noEmit",
    "test": "vitest run",
    "test:coverage": "vitest run --coverage"
  }
}
```

## Review Metrics

- **Review 周转时间**: 小 PR < 4 小时
- **PR 大小**: < 400 行变更
- **评论数**: 0-5 条实质性评论
- **来回次数**: < 3 轮
- **合并时间**: 大多数 PR < 24 小时
<!-- END_RULE -->

<!-- END_SOURCE source="turbo-skills-source" -->

<!-- TURBO-AI-RULES:END -->