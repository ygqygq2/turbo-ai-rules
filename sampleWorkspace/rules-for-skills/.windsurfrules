<!-- Generated by Turbo AI Rules at 2025-12-27T08:33:28.461Z -->
<!-- Total rules: 2 | Sources: turbo-skills-source -->


<!-- TURBO-AI-RULES:BEGIN -->

<!-- Generated by Turbo AI Rules at 2025-12-27T08:33:28.461Z -->
<!-- Total rules: 2 -->

# AI Coding Rules for Windsurf

> This file is automatically generated by Turbo AI Rules extension.
> **Windsurf**: Codeium AI IDE with advanced context understanding
> **Website**: https://codeium.com/windsurf

## Table of Contents

- [TypeScript Development Skills](#typescript-development-skills)
- [Debugging Skills](#debugging-skills)

---

<!-- BEGIN_SOURCE source="turbo-skills-source" count="2" -->

<!-- BEGIN_RULE source="turbo-skills-source" id="1302" priority="medium" -->
# TypeScript Development Skills
| Property | Value |
|----------|-------|
| id | 1302 |
| title | TypeScript Development Skills |
| description | TypeScript development best practices and advanced patterns |
| globs | `**/*.ts`, `**/*.tsx` |
| priority | medium |
| tags | `typescript`, `skills`, `development`, `best-practices` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## 核心能力

### 类型系统

```typescript
// Union 和 Intersection
type Status = "pending" | "approved" | "rejected";
type User = { name: string } & { id: number };

// 泛型
function identity<T>(value: T): T {
  return value;
}

// 条件类型
type IsString<T> = T extends string ? true : false;
```

### Discriminated Unions

```typescript
type Success = { status: "success"; data: any };
type Error = { status: "error"; message: string };
type Result = Success | Error;

function handleResult(result: Result) {
  if (result.status === "success") {
    console.log(result.data); // TypeScript 知道是 Success
  } else {
    console.error(result.message); // TypeScript 知道是 Error
  }
}
```

### Type Guards

```typescript
function isString(value: unknown): value is string {
  return typeof value === "string";
}
```

### 异步模式

```typescript
async function fetchData<T>(url: string): Promise<T> {
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    return (await response.json()) as T;
  } catch (error) {
    console.error("Fetch failed:", error);
    throw error;
  }
}

// 并发请求
await Promise.all(urls.map((url) => fetchData<T>(url)));
```

### 模块组织

```typescript
// 使用 barrel exports (index.ts)
export * from "./types";
export { DataService } from "./DataService";

// 路径别名
import { DataService } from "@/services/DataService";
```

## tsconfig.json 配置

```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  }
}
```

## 测试

```typescript
import { describe, it, expect } from "vitest";

describe("DataService", () => {
  it("should fetch data", async () => {
    const data = await service.getData();
    expect(data).toBeDefined();
  });
});
```

## 性能提示

1. 使用 const assertions: `const data = { x: 10 } as const;`
2. 启用增量编译: `incremental: true`
3. 优化导入: 直接导入而非 barrel exports（大项目）

## 常见陷阱

- 避免 `any`，使用 `unknown`
- 避免 `!` 非空断言，使用 null 检查
- `Object.keys()` 返回 `string[]`，非 `keyof T`

## 工具

- ESLint + @typescript-eslint
- Prettier
- Vitest
<!-- END_RULE -->

---

<!-- BEGIN_RULE source="turbo-skills-source" id="1303" priority="high" -->
# Debugging Skills
| Property | Value |
|----------|-------|
| id | 1303 |
| title | Debugging Skills |
| description | Effective debugging techniques and strategies |
| globs | `**/*` |
| priority | high |
| tags | `debugging`, `skills`, `troubleshooting`, `problem-solving` |
| version | 1.0.0 |
| author | Turbo AI Rules |
| lastUpdated | "2025-12-18T00:00:00.000Z" |

## Systematic Approach

1. **复现问题**：记录步骤、环境因素、最小复现用例
2. **收集信息**：战略性日志、debugger 语句、堆栈追踪
3. **形成假设**：可能原因、最近变更、数据流
4. **测试验证**：一次一个变更、git bisect、断言验证

## 项目调试工具配置

### VS Code Debugger

```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug TypeScript",
      "program": "${workspaceFolder}/src/index.ts",
      "preLaunchTask": "npm: build",
      "sourceMaps": true,
      "outFiles": ["${workspaceFolder}/dist/**/*.js"]
    }
  ]
}
```

### 关键命令

```bash
# Node.js 调试
node --inspect-brk index.js

# Git bisect 定位回归
git bisect start && git bisect bad HEAD && git bisect good v1.0.0
```

## 常见问题模式

### 内存泄漏

```typescript
// 移除事件监听器
window.addEventListener("resize", handler);
window.removeEventListener("resize", handler);

// 清理定时器
const timerId = setInterval(fn, 1000);
clearInterval(timerId);
```

### 竞态条件

```typescript
let isProcessing = false;
async function handleClick() {
  if (isProcessing) return;
  isProcessing = true;
  try {
    await processData();
  } finally {
    isProcessing = false;
  }
}
```

### 类型错误

```typescript
function isUser(obj: unknown): obj is User {
  return typeof obj === "object" && obj !== null && "name" in obj;
}
```

## 项目日志规范

```typescript
import { Logger } from "@ygqygq2/vscode-log";

const logger = new Logger("MyModule");

function processData(data: any) {
  logger.info("Processing started", { dataSize: data.length });
  try {
    const result = transform(data);
    logger.info("Processing completed", { resultSize: result.length });
    return result;
  } catch (error) {
    logger.error("Processing failed", {
      error: error.message,
      stack: error.stack,
      data: JSON.stringify(data).slice(0, 100),
    });
    throw error;
  }
}
```

## 性能分析

```typescript
// Performance API
performance.mark("start");
await expensiveOperation();
performance.mark("end");
performance.measure("op", "start", "end");

// Network 请求拦截器
async function fetchWithLogging(url: string, options?: RequestInit) {
  const start = performance.now();
  const response = await fetch(url, options);
  console.log(`[${url}] ${performance.now() - start}ms`);
  return response;
}
```
<!-- END_RULE -->

<!-- END_SOURCE source="turbo-skills-source" -->

<!-- TURBO-AI-RULES:END -->