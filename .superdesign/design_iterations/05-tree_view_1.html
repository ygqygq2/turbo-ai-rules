<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules Tree View</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
        :root {
            /* VS Code Themed Variables (Dark Theme Example) */
            --vscode-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            --vscode-font-size: 13px;
            --vscode-foreground: #cccccc;
            --vscode-descriptionForeground: #8c8c8c;
            --vscode-sideBar-background: #252526;
            --vscode-sideBar-border: #333333;
            --vscode-list-hoverBackground: #2a2d2e;
            --vscode-focusBorder: #007fd4;
            --vscode-errorForeground: #f48771;
            --vscode-editorWarning-foreground: #cca700;
            --vscode-charts-green: #89d185;
            --vscode-button-background: #0e639c;
            --vscode-button-foreground: #ffffff;
            --vscode-button-secondaryBackground: #3a3d41;
            --vscode-button-secondaryForeground: #ffffff;

            /* Custom Variables */
            --tree-indent: 20px;
            --row-height: 24px;
        }

        body {
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--vscode-foreground);
            background-color: var(--vscode-sideBar-background);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .tree-view-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        /* Header */
        .tree-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            border-bottom: 1px solid var(--vscode-sideBar-border);
            flex-shrink: 0;
        }

        .tree-header-title {
            font-weight: bold;
            font-size: 14px;
        }
        .tree-header-title .icon {
            margin-right: 6px;
        }

        .tree-header-actions .icon {
            cursor: pointer;
            margin-left: 8px;
            color: var(--vscode-descriptionForeground);
        }
        .tree-header-actions .icon:hover {
            color: var(--vscode-foreground);
        }

        /* Tree Area */
        .tree-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 5px 0;
        }

        ul.tree-root, ul.tree-group {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .tree-node {
            display: flex;
            align-items: center;
            height: var(--row-height);
            padding-right: 10px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tree-node:hover {
            background-color: var(--vscode-list-hoverBackground);
        }
        
        .tree-node.focused {
            outline: 1px solid var(--vscode-focusBorder);
            outline-offset: -1px;
        }

        .tree-node-content {
            display: flex;
            align-items: center;
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tree-node-expander {
            width: 16px;
            text-align: center;
            flex-shrink: 0;
            color: var(--vscode-descriptionForeground);
        }

        .tree-node-icon {
            margin-right: 6px;
            flex-shrink: 0;
        }

        .tree-node-label {
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tree-node-description {
            margin-left: 8px;
            color: var(--vscode-descriptionForeground);
            flex-shrink: 0;
        }

        /* Node Types & States */
        .node-type-source .tree-node-label {
            font-weight: bold;
        }
        
        .node-status-synced { color: var(--vscode-charts-green); }
        .node-status-conflict { color: var(--vscode-editorWarning-foreground); }
        .node-status-error { color: var(--vscode-errorForeground); }

        .priority-high { color: var(--vscode-errorForeground); }
        .priority-medium { color: var(--vscode-editorWarning-foreground); }
        .priority-low { color: var(--vscode-descriptionForeground); }
        
        .node-checkbox {
            margin: 0 6px;
        }

        /* Footer */
        .tree-footer {
            flex-shrink: 0;
            border-top: 1px solid var(--vscode-sideBar-border);
        }

        .view-switcher {
            display: flex;
            padding: 8px;
            justify-content: center;
            gap: 10px;
        }
        .view-switcher button {
            background: none;
            border: 1px solid transparent;
            color: var(--vscode-descriptionForeground);
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
        }
        .view-switcher button.active, .view-switcher button:hover {
            color: var(--vscode-foreground);
            background-color: var(--vscode-button-secondaryBackground);
        }

        .status-bar {
            padding: 6px 10px;
            background-color: var(--vscode-sideBar-background);
            border-top: 1px solid var(--vscode-sideBar-border);
            font-size: 12px;
            color: var(--vscode-descriptionForeground);
            text-align: center;
        }
        .status-bar .icon {
            vertical-align: text-bottom;
        }

        /* Helper for indentation */
        .indent-1 { padding-left: calc(var(--tree-indent) * 1); }
        .indent-2 { padding-left: calc(var(--tree-indent) * 2); }
        .indent-3 { padding-left: calc(var(--tree-indent) * 3); }

        /* Icons */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            vertical-align: middle;
        }
    </style>
</head>
<body>

    <div class="tree-view-container">
        <!-- Header -->
        <header class="tree-header">
            <div class="tree-header-title">
                <i data-lucide="target" class="icon"></i>
                AI RULES (156)
            </div>
            <div class="tree-header-actions">
                <i data-lucide="settings-2" class="icon"></i>
                <i data-lucide="refresh-cw" class="icon"></i>
                <i data-lucide="plus" class="icon"></i>
                <i data-lucide="search" class="icon"></i>
            </div>
        </header>

        <!-- Tree Body -->
        <div class="tree-body">
            <ul class="tree-root">
                <!-- Source: company-rules -->
                <li class="tree-node-container">
                    <div class="tree-node node-type-source focused">
                        <span class="tree-node-expander">‚ñº</span>
                        <div class="tree-node-content">
                            <span class="tree-node-icon">üì¶</span>
                            <span class="tree-node-label">company-rules</span>
                            <span class="tree-node-description">main <span class="node-status-synced">‚úì</span></span>
                        </div>
                    </div>
                    <ul class="tree-group">
                        <!-- Directory: rules -->
                        <li class="tree-node-container">
                            <div class="tree-node indent-1">
                                <span class="tree-node-expander">‚ñº</span>
                                <div class="tree-node-content">
                                    <span class="tree-node-icon">üìÅ</span>
                                    <input type="checkbox" class="node-checkbox" checked>
                                    <span class="tree-node-label">rules</span>
                                </div>
                            </div>
                            <ul class="tree-group">
                                <!-- Directory: auth -->
                                <li class="tree-node-container">
                                    <div class="tree-node indent-2">
                                        <span class="tree-node-expander">‚ñº</span>
                                        <div class="tree-node-content">
                                            <span class="tree-node-icon">üìÅ</span>
                                            <input type="checkbox" class="node-checkbox" checked>
                                            <span class="tree-node-label">auth</span>
                                        </div>
                                    </div>
                                    <ul class="tree-group">
                                        <li class="tree-node indent-3">
                                            <span class="tree-node-expander"></span>
                                            <div class="tree-node-content">
                                                <input type="checkbox" class="node-checkbox" checked>
                                                <span class="tree-node-icon priority-high">üî•</span>
                                                <span class="tree-node-label">jwt-validation.md</span>
                                                <span class="tree-node-description">HIGH ‚Ä¢ auth</span>
                                            </div>
                                        </li>
                                        <li class="tree-node indent-3">
                                            <span class="tree-node-expander"></span>
                                            <div class="tree-node-content">
                                                <input type="checkbox" class="node-checkbox" checked>
                                                <span class="tree-node-icon priority-medium">üü°</span>
                                                <span class="tree-node-label">oauth2-flow.md</span>
                                                <span class="tree-node-description">MED ‚Ä¢ auth</span>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                                <!-- Directory: security -->
                                <li class="tree-node-container">
                                    <div class="tree-node indent-2">
                                        <span class="tree-node-expander">‚ñº</span>
                                        <div class="tree-node-content">
                                            <span class="tree-node-icon">üìÅ</span>
                                            <input type="checkbox" class="node-checkbox" indeterminate>
                                            <span class="tree-node-label">security</span>
                                        </div>
                                    </div>
                                     <ul class="tree-group">
                                        <li class="tree-node indent-3">
                                            <span class="tree-node-expander"></span>
                                            <div class="tree-node-content">
                                                <input type="checkbox" class="node-checkbox" checked>
                                                <span class="tree-node-icon priority-medium">üü°</span>
                                                <span class="tree-node-label">input-sanitize.md</span>
                                                <span class="tree-node-description">MED ‚Ä¢ sec</span>
                                            </div>
                                        </li>
                                        <li class="tree-node indent-3">
                                            <span class="tree-node-expander"></span>
                                            <div class="tree-node-content">
                                                <input type="checkbox" class="node-checkbox">
                                                <span class="tree-node-icon priority-low">‚ÑπÔ∏è</span>
                                                <span class="tree-node-label">xss-prevention.md</span>
                                                <span class="tree-node-description">LOW ‚Ä¢ sec</span>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                                <!-- Directory: style -->
                                <li class="tree-node-container">
                                    <div class="tree-node indent-2">
                                        <span class="tree-node-expander">‚ñ∂</span>
                                        <div class="tree-node-content">
                                            <span class="tree-node-icon">üìÅ</span>
                                            <input type="checkbox" class="node-checkbox">
                                            <span class="tree-node-label">style</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <!-- File: README.md -->
                        <li class="tree-node indent-1">
                            <span class="tree-node-expander"></span>
                            <div class="tree-node-content">
                                <span class="tree-node-icon"></span>
                                <span class="tree-node-label" style="margin-left: 22px; color: var(--vscode-descriptionForeground);">README.md</span>
                                <span class="tree-node-description">(non-rule)</span>
                            </div>
                        </li>
                    </ul>
                </li>
                <!-- Source: personal-rules -->
                <li class="tree-node-container">
                    <div class="tree-node node-type-source">
                        <span class="tree-node-expander">‚ñ∂</span>
                        <div class="tree-node-content">
                            <span class="tree-node-icon">üì¶</span>
                            <span class="tree-node-label">personal-rules</span>
                            <span class="tree-node-description">develop <span class="node-status-error">‚úó</span></span>
                        </div>
                    </div>
                </li>
                <!-- Source: archived-rules -->
                <li class="tree-node-container">
                    <div class="tree-node node-type-source">
                        <span class="tree-node-expander">‚ñ∂</span>
                        <div class="tree-node-content">
                            <span class="tree-node-icon">üì¶</span>
                            <span class="tree-node-label">archived-rules</span>
                            <span class="tree-node-description">main <span class="node-status-conflict">‚ö†Ô∏è</span></span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Footer -->
        <footer class="tree-footer">
            <div class="view-switcher">
                <button class="active"><i data-lucide="folder-tree" class="icon"></i> File Tree</button>
                <button><i data-lucide="list" class="icon"></i> Rule List</button>
                <button><i data-lucide="tags" class="icon"></i> Tag Groups</button>
            </div>
            <div class="status-bar">
                <i data-lucide="bar-chart-2" class="icon"></i> 12/156 Rules | <span class="node-status-synced">‚úì</span> 2/3 Sources | <span class="node-status-conflict">‚ö†Ô∏è</span> 2 Conflicts
            </div>
        </footer>
    </div>

    <script>
        lucide.createIcons();
        
        // Basic interactivity for demo purposes
        document.querySelectorAll('.tree-node').forEach(node => {
            node.addEventListener('click', (e) => {
                // Remove focus from all other nodes
                document.querySelectorAll('.tree-node.focused').forEach(focusedNode => {
                    focusedNode.classList.remove('focused');
                });
                // Add focus to the clicked node
                node.classList.add('focused');
                
                // Toggle expand/collapse if expander is clicked
                const expander = e.target.closest('.tree-node-expander');
                if (expander) {
                    const parentNode = node.closest('.tree-node-container');
                    const group = parentNode.querySelector('.tree-group');
                    if (group) {
                        const isExpanded = expander.textContent === '‚ñº';
                        group.style.display = isExpanded ? 'none' : 'block';
                        expander.textContent = isExpanded ? '‚ñ∂' : '‚ñº';
                    }
                }
            });
        });
    </script>
</body>
</html>
