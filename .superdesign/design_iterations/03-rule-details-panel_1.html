<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'none'; style-src 'unsafe-inline' https://microsoft.github.io; font-src https://microsoft.github.io; script-src 'nonce-{{nonce}}';"
    />
    <title>Rule Details</title>
    <link rel="stylesheet" href="https://microsoft.github.io/vscode-codicons/dist/codicon.css" />
    <style>
      :root {
        /* VS Code ‰∏ªÈ¢òÂèòÈáè - ÊöóËâ≤‰∏ªÈ¢òÈªòËÆ§ÂÄºÔºàÁî®‰∫éÊµèËßàÂô®È¢ÑËßàÔºâ*/
        --vscode-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica,
          Arial, sans-serif;
        --vscode-font-weight: 400;
        --vscode-font-size: 13px;
        --vscode-foreground: #cccccc;
        --vscode-descriptionForeground: #8c8c8c;
        --vscode-errorForeground: #f48771;
        --vscode-editorWarning-foreground: #cca700;

        /* ËÉåÊôØËâ≤ */
        --vscode-editor-background: #1e1e1e;
        --vscode-editorWidget-background: #252526;
        --vscode-sideBar-background: #252526;
        --vscode-input-background: #3c3c3c;

        /* ËæπÊ°Ü */
        --vscode-editorWidget-border: #454545;
        --vscode-sideBar-border: #333333;
        --vscode-focusBorder: #007fd4;

        /* ÊåâÈíÆ */
        --vscode-button-background: #0e639c;
        --vscode-button-foreground: #ffffff;
        --vscode-button-hoverBackground: #1177bb;
        --vscode-button-secondaryBackground: #3a3d41;
        --vscode-button-secondaryForeground: #ffffff;
        --vscode-button-secondaryHoverBackground: #45494e;

        /* ÂàóË°® */
        --vscode-list-hoverBackground: #2a2d2e;
        --vscode-list-activeSelectionBackground: #094771;
        --vscode-list-activeSelectionForeground: #ffffff;
        --vscode-list-inactiveSelectionBackground: #37373d;

        /* ÂõæË°®È¢úËâ≤ */
        --vscode-charts-green: #89d185;
        --vscode-charts-blue: #75beff;
        --vscode-charts-yellow: #cca700;
        --vscode-charts-red: #f48771;
        --vscode-charts-purple: #b180d7;

        /* ÂÖ∂‰ªñ */
        --vscode-badge-background: #4d4d4d;
        --vscode-badge-foreground: #ffffff;
        --vscode-checkbox-background: #3c3c3c;
        --vscode-checkbox-border: #6c6c6c;
        --vscode-checkbox-foreground: #f0f0f0;
        --vscode-icon-foreground: #c5c5c5;
        --vscode-textLink-foreground: #3794ff;
        --vscode-toolbar-hoverBackground: #2a2d2e;

        /* Èó¥Ë∑ùÁ≥ªÁªü */
        --spacing-xs: 4px;
        --spacing-sm: 8px;
        --spacing-md: 12px;
        --spacing-lg: 16px;
        --spacing-xl: 20px;
        --border-radius: 4px;
      }

      body {
        font-family: var(--vscode-font-family);
        font-weight: var(--vscode-font-weight);
        font-size: var(--vscode-font-size);
        color: var(--vscode-foreground);
        background-color: var(--vscode-editor-background);
        padding: var(--spacing-md);
        box-sizing: border-box;
      }

      .details-container {
        animation: slideInRight 0.3s ease-out;
      }

      .header {
        position: sticky;
        top: 0;
        background-color: var(--vscode-editorWidget-background);
        z-index: 10;
      }

      .title-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md);
        border-bottom: 1px solid var(--vscode-editorWidget-border, transparent);
      }

      .title-bar h1 {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .toolbar {
        display: flex;
        gap: var(--spacing-sm);
      }

      .toolbar-button {
        background: none;
        border: none;
        color: var(--vscode-foreground);
        padding: 4px;
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .toolbar-button:hover {
        background-color: var(--vscode-toolbar-hoverBackground);
        transform: scale(1.1);
      }

      .section {
        padding: var(--spacing-md);
        border-bottom: 1px solid var(--vscode-editorWidget-border, transparent);
      }

      .section-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--vscode-descriptionForeground);
        margin-bottom: var(--spacing-sm);
        text-transform: uppercase;
      }

      .metadata-grid {
        display: grid;
        grid-template-columns: 120px 1fr;
        gap: var(--spacing-sm);
        font-size: 13px;
      }

      .metadata-label {
        color: var(--vscode-descriptionForeground);
      }
      .metadata-value {
        word-break: break-all;
      }

      .priority-high {
        background-color: var(--vscode-errorForeground);
        color: var(--vscode-button-foreground);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }

      .tag-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-sm);
      }

      .tag {
        display: inline-block;
        background-color: var(--vscode-badge-background);
        color: var(--vscode-badge-foreground);
        padding: 4px 10px;
        border-radius: var(--border-radius);
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .tag:hover {
        background-color: var(--vscode-badge-foreground);
        color: var(--vscode-badge-background);
        transform: translateY(-2px);
      }

      .content-preview {
        padding: 0 var(--spacing-md) var(--spacing-md) var(--spacing-md);
        font-family: var(--vscode-editor-font-family);
        line-height: 1.6;
      }
      .content-preview.no-wrap {
        white-space: pre;
        overflow-x: auto;
      }
      .content-preview h1,
      .content-preview h2,
      .content-preview h3 {
        margin-top: 1.5em;
        margin-bottom: 0.5em;
        font-weight: 600;
      }
      .content-preview h1 {
        font-size: 1.8em;
      }
      .content-preview h2 {
        font-size: 1.5em;
      }
      .content-preview h3 {
        font-size: 1.2em;
      }
      .content-preview code {
        background-color: var(--vscode-textCodeBlock-background);
        padding: 2px 4px;
        border-radius: 3px;
        font-family: var(--vscode-editor-font-family);
      }
      .content-preview pre {
        background-color: var(--vscode-textCode-background);
        padding: var(--spacing-md);
        border-radius: var(--border-radius);
        overflow-x: auto;
      }
      .content-preview pre code {
        padding: 0;
        background: none;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="details-container">
      <header class="header">
        <div class="title-bar">
          <h1>
            <i class="codicon codicon-file-text"></i>
            <span id="rule-name">TypeScript Naming Conventions</span>
          </h1>
          <div class="toolbar" role="toolbar" aria-label="Rule actions">
            <button id="toggle-wrap" class="toolbar-button" aria-label="Toggle word wrap">
              <i class="codicon codicon-word-wrap"></i>
            </button>
            <button
              class="toolbar-button"
              onclick="sendMessage('copyContent')"
              aria-label="Copy content"
            >
              <i class="codicon codicon-copy"></i>
            </button>
            <button
              class="toolbar-button"
              onclick="sendMessage('exportRule')"
              aria-label="Export rule"
            >
              <i class="codicon codicon-export"></i>
            </button>
            <button class="toolbar-button" onclick="sendMessage('editRule')" aria-label="Edit rule">
              <i class="codicon codicon-edit"></i>
            </button>
            <button
              class="toolbar-button"
              onclick="sendMessage('closePanel')"
              aria-label="Close panel"
            >
              <i class="codicon codicon-close"></i>
            </button>
          </div>
        </div>
      </header>

      <main>
        <section class="section">
          <h2 class="section-title">üìä Metadata</h2>
          <div class="metadata-grid">
            <div class="metadata-label">Source</div>
            <div class="metadata-value" id="meta-source">company-rules</div>
            <div class="metadata-label">File Path</div>
            <div class="metadata-value" id="meta-path">rules/ts-naming.mdc</div>
            <div class="metadata-label">Version</div>
            <div class="metadata-value" id="meta-version">1.2.0</div>
            <div class="metadata-label">Author</div>
            <div class="metadata-value" id="meta-author">Team Lead</div>
            <div class="metadata-label">Priority</div>
            <div class="metadata-value"><span class="priority-high">high üî•</span></div>
          </div>
        </section>

        <section class="section">
          <h2 class="section-title">üìù Description</h2>
          <p id="description">
            Naming conventions for TypeScript projects, including variables, functions, classes, and
            more.
          </p>
        </section>

        <section class="section">
          <h2 class="section-title">üè∑Ô∏è Tags</h2>
          <div class="tag-cloud" id="tag-cloud">
            <span class="tag">typescript</span>
            <span class="tag">naming</span>
            <span class="tag">style</span>
            <span class="tag">conventions</span>
            <span class="tag">best-practices</span>
          </div>
        </section>

        <section class="content-preview" id="content-preview">
          <h2 class="section-title">üìÑ Content Preview</h2>
          <h1>Naming Conventions</h1>
          <h2>Variables</h2>
          <p>Use camelCase for variables:</p>
          <pre><code>const userName = "John";</code></pre>
          <h2>Classes</h2>
          <p>Use PascalCase for classes:</p>
          <pre><code>class UserAccount {}</code></pre>
        </section>
      </main>
    </div>

    <script nonce="{{nonce}}">
      const vscode = acquireVsCodeApi();

      function sendMessage(type, payload) {
        vscode.postMessage({ type, payload });
      }

      const contentPreview = document.getElementById('content-preview');
      const toggleWrapBtn = document.getElementById('toggle-wrap');
      toggleWrapBtn.addEventListener('click', () => {
        contentPreview.classList.toggle('no-wrap');
        sendMessage('toggleWrap', { wrap: !contentPreview.classList.contains('no-wrap') });
      });

      window.addEventListener('message', (event) => {
        const message = event.data;
        if (message.type === 'loadRule') {
          const rule = message.data;
          document.getElementById('rule-name').textContent = rule.name;
          document.getElementById('meta-source').textContent = rule.source;
          document.getElementById('meta-path').textContent = rule.path;
          document.getElementById('meta-version').textContent = rule.version || 'N/A';
          document.getElementById('meta-author').textContent = rule.author || 'N/A';
          document.getElementById('description').textContent =
            rule.description || 'No description provided.';
          // ... and so on for other fields
        }
      });
    </script>
  </body>
</html>
