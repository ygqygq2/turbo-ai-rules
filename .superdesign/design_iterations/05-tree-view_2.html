<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è§„åˆ™æ ‘è§†å›¾ - v2 (å½“å‰å®ç°)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@vscode/codicons@latest/dist/codicon.css">
    <style>
      :root {
        /* VS Code ä¸»é¢˜å˜é‡ */
        --vscode-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica,
          Arial, sans-serif;
        --vscode-font-size: 13px;
        --vscode-foreground: #cccccc;
        --vscode-descriptionForeground: #8c8c8c;
        --vscode-disabledForeground: #656565;
        --vscode-sideBar-background: #252526;
        --vscode-sideBar-border: #2b2b2b;
        --vscode-list-hoverBackground: #2a2d2e;
        --vscode-list-activeSelectionBackground: #094771;
        --vscode-list-inactiveSelectionBackground: #37373d;
        --vscode-focusBorder: #007fd4;
        --vscode-errorForeground: #f48771;
        --vscode-warningForeground: #cca700;
        --vscode-charts-blue: #75beff;
        --vscode-charts-green: #89d185;

        /* è‡ªå®šä¹‰å˜é‡ */
        --tree-indent: 8px;
        --row-height: 22px;
      }

      body {
        font-family: var(--vscode-font-family);
        font-size: var(--vscode-font-size);
        color: var(--vscode-foreground);
        background-color: var(--vscode-sideBar-background);
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      .tree-container {
        height: 100vh;
        overflow-y: auto;
        padding: 4px 0;
      }

      /* æ ‘èŠ‚ç‚¹ */
      .tree-item {
        display: flex;
        align-items: center;
        height: var(--row-height);
        padding: 0 8px 0 0;
        cursor: pointer;
        user-select: none;
      }

      .tree-item:hover {
        background-color: var(--vscode-list-hoverBackground);
      }

      .tree-item.selected {
        background-color: var(--vscode-list-activeSelectionBackground);
      }

      /* å±•å¼€/æŠ˜å ç®­å¤´ */
      .tree-item-chevron {
        width: 16px;
        height: var(--row-height);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .tree-item-chevron .codicon {
        font-size: 12px;
        color: var(--vscode-foreground);
      }

      .tree-item-chevron.collapsed .codicon-chevron-down {
        transform: rotate(-90deg);
      }

      /* å›¾æ ‡ */
      .tree-item-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 16px;
        height: var(--row-height);
        margin-right: 6px;
        flex-shrink: 0;
      }

      .tree-item-icon .codicon {
        font-size: 16px;
      }

      /* æºå›¾æ ‡é¢œè‰² */
      .icon-source-enabled {
        color: var(--vscode-charts-blue);
      }

      .icon-source-disabled {
        color: var(--vscode-disabledForeground);
      }

      /* è§„åˆ™å›¾æ ‡é¢œè‰² - å·²é€‰ä¸­ */
      .icon-rule-selected-high {
        color: var(--vscode-errorForeground);
      }

      .icon-rule-selected-medium {
        color: var(--vscode-warningForeground);
      }

      .icon-rule-selected-low {
        color: var(--vscode-descriptionForeground);
      }

      .icon-rule-selected-normal {
        color: var(--vscode-foreground);
      }

      /* è§„åˆ™å›¾æ ‡é¢œè‰² - æœªé€‰ä¸­ */
      .icon-rule-unselected-high {
        color: var(--vscode-errorForeground);
      }

      .icon-rule-unselected-medium {
        color: var(--vscode-warningForeground);
      }

      .icon-rule-unselected-low {
        color: var(--vscode-descriptionForeground);
      }

      .icon-rule-unselected-normal {
        color: var(--vscode-foreground);
      }

      /* æ ‡ç­¾ */
      .tree-item-label {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      /* æè¿°ä¿¡æ¯ */
      .tree-item-description {
        margin-left: 8px;
        color: var(--vscode-descriptionForeground);
        font-size: 12px;
        flex-shrink: 0;
      }

      /* ç¼©è¿› */
      .indent-0 {
        padding-left: 0;
      }

      .indent-1 {
        padding-left: calc(var(--tree-indent) + 16px);
      }

      /* ç©ºçŠ¶æ€ */
      .tree-item.empty {
        color: var(--vscode-descriptionForeground);
        cursor: default;
      }

      .tree-item.empty:hover {
        background-color: transparent;
      }

      /* å­èŠ‚ç‚¹å®¹å™¨ */
      .tree-children {
        display: none;
      }

      .tree-children.expanded {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="tree-container">
      <!-- ç¤ºä¾‹1: å·²å¯ç”¨æº + å…¨éƒ¨å·²é€‰ -->
      <div class="tree-source">
        <div class="tree-item indent-0 selected" data-type="source">
          <div class="tree-item-chevron">
            <i class="codicon codicon-chevron-down"></i>
          </div>
          <div class="tree-item-icon icon-source-enabled">
            <i class="codicon codicon-repo-check"></i>
          </div>
          <div class="tree-item-label">company-rules</div>
          <div class="tree-item-description">âœ… å·²å¯ç”¨ â€¢ main â€¢ âœ… å…¨éƒ¨å·²é€‰ (25)</div>
        </div>
        <div class="tree-children expanded">
          <!-- è§„åˆ™1: å·²é€‰ä¸­ - é«˜ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-selected-high">
              <i class="codicon codicon-pass-filled"></i>
            </div>
            <div class="tree-item-label">JWT éªŒè¯è§„èŒƒ</div>
            <div class="tree-item-description">âœ“ å·²é€‰ â€¢ HIGH â€¢ auth, security</div>
          </div>
          <!-- è§„åˆ™2: å·²é€‰ä¸­ - ä¸­ç­‰ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-selected-medium">
              <i class="codicon codicon-pass-filled"></i>
            </div>
            <div class="tree-item-label">OAuth2 æµç¨‹</div>
            <div class="tree-item-description">âœ“ å·²é€‰ â€¢ MEDIUM â€¢ auth</div>
          </div>
          <!-- è§„åˆ™3: å·²é€‰ä¸­ - ä½ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-selected-low">
              <i class="codicon codicon-pass-filled"></i>
            </div>
            <div class="tree-item-label">å¯†ç ç­–ç•¥</div>
            <div class="tree-item-description">âœ“ å·²é€‰ â€¢ LOW â€¢ auth</div>
          </div>
        </div>
      </div>

      <!-- ç¤ºä¾‹2: å·²å¯ç”¨æº + éƒ¨åˆ†å·²é€‰ -->
      <div class="tree-source">
        <div class="tree-item indent-0" data-type="source">
          <div class="tree-item-chevron">
            <i class="codicon codicon-chevron-down"></i>
          </div>
          <div class="tree-item-icon icon-source-enabled">
            <i class="codicon codicon-repo-check"></i>
          </div>
          <div class="tree-item-label">personal-rules</div>
          <div class="tree-item-description">âœ… å·²å¯ç”¨ â€¢ develop â€¢ ğŸ“Š 12/25 å·²é€‰</div>
        </div>
        <div class="tree-children expanded">
          <!-- è§„åˆ™1: å·²é€‰ä¸­ - æ™®é€šä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-selected-normal">
              <i class="codicon codicon-pass-filled"></i>
            </div>
            <div class="tree-item-label">è¾“å…¥éªŒè¯è§„èŒƒ</div>
            <div class="tree-item-description">âœ“ å·²é€‰ â€¢ security</div>
          </div>
          <!-- è§„åˆ™2: æœªé€‰ä¸­ - é«˜ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-unselected-high">
              <i class="codicon codicon-flame"></i>
            </div>
            <div class="tree-item-label">XSS é˜²æŠ¤</div>
            <div class="tree-item-description">HIGH â€¢ security</div>
          </div>
          <!-- è§„åˆ™3: æœªé€‰ä¸­ - ä¸­ç­‰ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-unselected-medium">
              <i class="codicon codicon-warning"></i>
            </div>
            <div class="tree-item-label">CSRF é˜²æŠ¤</div>
            <div class="tree-item-description">MEDIUM â€¢ security</div>
          </div>
          <!-- è§„åˆ™4: æœªé€‰ä¸­ - ä½ä¼˜å…ˆçº§ -->
          <div class="tree-item indent-1" data-type="rule">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon icon-rule-unselected-low">
              <i class="codicon codicon-info"></i>
            </div>
            <div class="tree-item-label">ç¼–ç è§„èŒƒ</div>
            <div class="tree-item-description">LOW â€¢ style</div>
          </div>
        </div>
      </div>

      <!-- ç¤ºä¾‹3: å·²å¯ç”¨æº + æœªé€‰æ‹© -->
      <div class="tree-source">
        <div class="tree-item indent-0" data-type="source">
          <div class="tree-item-chevron collapsed">
            <i class="codicon codicon-chevron-down"></i>
          </div>
          <div class="tree-item-icon icon-source-enabled">
            <i class="codicon codicon-repo-check"></i>
          </div>
          <div class="tree-item-label">test-rules</div>
          <div class="tree-item-description">âœ… å·²å¯ç”¨ â€¢ main â€¢ âš ï¸ æœªé€‰æ‹©</div>
        </div>
        <div class="tree-children">
          <!-- æŠ˜å çŠ¶æ€ï¼Œä¸æ˜¾ç¤ºå­èŠ‚ç‚¹ -->
        </div>
      </div>

      <!-- ç¤ºä¾‹4: å·²ç¦ç”¨æº -->
      <div class="tree-source">
        <div class="tree-item indent-0" data-type="source">
          <div class="tree-item-chevron collapsed">
            <i class="codicon codicon-chevron-down"></i>
          </div>
          <div class="tree-item-icon icon-source-disabled">
            <i class="codicon codicon-repo"></i>
          </div>
          <div class="tree-item-label">archived-rules</div>
          <div class="tree-item-description">âŒ å·²ç¦ç”¨ â€¢ main</div>
        </div>
        <div class="tree-children">
          <!-- æŠ˜å çŠ¶æ€ï¼Œä¸æ˜¾ç¤ºå­èŠ‚ç‚¹ -->
        </div>
      </div>

      <!-- ç¤ºä¾‹5: å·²å¯ç”¨æº + æ— è§„åˆ™ -->
      <div class="tree-source">
        <div class="tree-item indent-0" data-type="source">
          <div class="tree-item-chevron collapsed">
            <i class="codicon codicon-chevron-down"></i>
          </div>
          <div class="tree-item-icon icon-source-enabled">
            <i class="codicon codicon-repo-check"></i>
          </div>
          <div class="tree-item-label">empty-source</div>
          <div class="tree-item-description">âœ… å·²å¯ç”¨ â€¢ main â€¢ ğŸ“­ æ— è§„åˆ™</div>
        </div>
        <div class="tree-children">
          <div class="tree-item indent-1 empty" data-type="empty">
            <div class="tree-item-chevron"></div>
            <div class="tree-item-icon">
              <i class="codicon codicon-info"></i>
            </div>
            <div class="tree-item-label">No rules (sync to fetch)</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // å±•å¼€/æŠ˜å åŠŸèƒ½
      document.querySelectorAll('.tree-item-chevron').forEach((chevron) => {
        chevron.addEventListener('click', (e) => {
          e.stopPropagation();
          const item = chevron.closest('.tree-item');
          const source = item.closest('.tree-source');
          const children = source.querySelector('.tree-children');

          if (children) {
            children.classList.toggle('expanded');
            chevron.classList.toggle('collapsed');
          }
        });
      });

      // é€‰ä¸­åŠŸèƒ½
      document.querySelectorAll('.tree-item:not(.empty)').forEach((item) => {
        item.addEventListener('click', () => {
          // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
          document.querySelectorAll('.tree-item.selected').forEach((selected) => {
            selected.classList.remove('selected');
          });
          // æ·»åŠ é€‰ä¸­çŠ¶æ€
          item.classList.add('selected');

          // å¦‚æœæ˜¯è§„åˆ™é¡¹ï¼Œæ¨¡æ‹Ÿç‚¹å‡»æ˜¾ç¤ºè¯¦æƒ…
          if (item.dataset.type === 'rule') {
            console.log('Show rule detail:', item.querySelector('.tree-item-label').textContent);
          }
        });
      });

      // å³é”®èœå•æ¨¡æ‹Ÿ
      document.querySelectorAll('.tree-item[data-type="source"]').forEach((item) => {
        item.addEventListener('contextmenu', (e) => {
          e.preventDefault();
          const label = item.querySelector('.tree-item-label').textContent;
          console.log(`å³é”®èœå• - ${label}:`);
          console.log('  â€¢ ç¼–è¾‘æºé…ç½®');
          console.log('  â€¢ æµ‹è¯•è¿æ¥');
          console.log('  â€¢ å¯ç”¨/ç¦ç”¨');
          console.log('  â€¢ æŸ¥çœ‹æºè¯¦æƒ…');
          console.log('  â€¢ é€‰æ‹©è§„åˆ™');
          console.log('  â€¢ åˆ é™¤æº');
        });
      });
    </script>
  </body>
</html>
        :root {
            --vscode-editor-background: #1e1e1e;
            --vscode-sideBar-background: #252526;
            --vscode-foreground: #cccccc;
            --vscode-descriptionForeground: #8b8b8b;
            --vscode-focusBorder: #007fd4;
            --vscode-list-hoverBackground: #2a2d2e;
            --vscode-list-activeSelectionBackground: #094771;
            --vscode-list-focusBackground: #062f4a;
            --vscode-badge-background: #4d4d4d;
            --vscode-badge-foreground: #ffffff;
            --vscode-charts-green: #89d185;
            --vscode-errorForeground: #f48771;
            --vscode-editorWarning-foreground: #cca700;
            --vscode-charts-blue: #3794ff;
        }

        body {
            background-color: var(--vscode-editor-background);
            color: var(--vscode-foreground);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 2px;
        }

        .tree-view-container {
            display: flex;
            flex-direction: column;
        }

        .tree-item {
            display: flex;
            align-items: center;
            padding: 2px 8px;
            cursor: pointer;
            user-select: none;
            height: 22px; /* VSCode default tree item height */
        }

        .tree-item:hover {
            background-color: var(--vscode-list-hoverBackground);
        }
        
        .tree-item.is-focused {
             background-color: var(--vscode-list-focusBackground);
             outline: 1px solid var(--vscode-focusBorder);
             outline-offset: -1px;
        }

        .tree-item .actions {
            display: none;
            margin-left: auto;
        }

        .tree-item:hover .actions, .tree-item.is-focused .actions {
            display: flex;
        }

        .tree-item .actions .action-btn {
            background: none; border: none; color: var(--vscode-foreground); padding: 2px 4px; cursor: pointer; border-radius: 4px;
        }
        .tree-item .actions .action-btn:hover { background-color: var(--vscode-badge-background); }

        .chevron {
            margin-right: 4px;
            font-size: 16px;
            width: 16px;
            text-align: center;
        }

        .item-content {
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .item-name {
            font-weight: 500;
        }

        .item-description {
            color: var(--vscode-descriptionForeground);
            font-size: 0.9em;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .status-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .status-icon.high {
            background-color: var(--vscode-errorForeground);
            color: #1e1e1e;
        }
        .status-icon.medium {
            background-color: var(--vscode-editorWarning-foreground);
            color: #1e1e1e;
        }
        .status-icon.low {
            background-color: var(--vscode-descriptionForeground);
            color: #1e1e1e;
        }
        .status-icon.default {
            background-color: var(--vscode-charts-blue);
            color: #1e1e1e;
        }

        .tag {
            color: var(--vscode-descriptionForeground);
        }

    </style>
</head>
<body>

<div class="tree-view-container">
    <!-- Source: my -->
    <div class="tree-item is-focused">
        <div class="chevron"><i class="codicon codicon-chevron-down"></i></div>
        <div class="item-content">
            <span class="item-name">my</span>
            <span class="item-description">
                <i class="codicon codicon-check" style="color: var(--vscode-charts-green);"></i> å·²å¯ç”¨ ãƒ» main ãƒ» 
                <i class="codicon codicon-repo-sync"></i> 4/27 å·²é€‰
            </span>
        </div>
        <div class="actions">
            <button class="action-btn" title="Sync"><i class="codicon codicon-sync"></i></button>
            <button class="action-btn" title="Delete"><i class="codicon codicon-trash"></i></button>
        </div>
    </div>

    <!-- Rule Items -->
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon default"><i class="codicon codicon-check"></i></div>
            <span class="item-name">AI Rules è§„åˆ™åº“</span>
            <span class="item-description">âœ“ å·²é€‰</span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon default"><i class="codicon codicon-check"></i></div>
            <span class="item-name">AI è§„åˆ™åº“ - Copilot æŒ‡å¯¼è¯´æ˜</span>
            <span class="item-description">âœ“ å·²é€‰</span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon default"><i class="codicon codicon-check"></i></div>
            <span class="item-name">é€šç”¨æ ‡å‡†å’Œè§„èŒƒ</span>
            <span class="item-description">âœ“ å·²é€‰</span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon high"><i class="codicon codicon-check"></i></div>
            <span class="item-name">Python æœ€ä½³å®è·µ</span>
            <span class="item-description">âœ“ å·²é€‰ ãƒ» <span class="tag">HIGH ãƒ» python, flask +3</span></span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon high"><i class="codicon codicon-check"></i></div>
            <span class="item-name">TypeScript æœ€ä½³å®è·µ</span>
            <span class="item-description">âœ“ å·²é€‰ ãƒ» <span class="tag">HIGH ãƒ» typescript, web-devel...</span></span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon default"><i class="codicon codicon-check"></i></div>
            <span class="item-name">ç¼–ç¨‹è¯­è¨€è§„èŒƒ</span>
            <span class="item-description">âœ“ å·²é€‰</span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon default"><i class="codicon codicon-check"></i></div>
            <span class="item-name">UI/UX è®¾è®¡è§„èŒƒ</span>
            <span class="item-description">âœ“ å·²é€‰</span>
        </div>
    </div>
    <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon high"><i class="codicon codicon-check"></i></div>
            <span class="item-name">React æœ€ä½³å®è·µ</span>
            <span class="item-description">âœ“ å·²é€‰ ãƒ» <span class="tag">HIGH ãƒ» react, hooks +3</span></span>
        </div>
    </div>
     <div class="tree-item" style="padding-left: 28px;">
        <div class="item-content">
            <div class="status-icon high"><i class="codicon codicon-check"></i></div>
            <span class="item-name">Next.js æœ€ä½³å®è·µ</span>
            <span class="item-description">âœ“ å·²é€‰ ãƒ» <span class="tag">HIGH ãƒ» nextjs, app-router +3</span></span>
        </div>
    </div>

</div>

</body>
</html>
