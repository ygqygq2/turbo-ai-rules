---
id: 80002
title: Turbo AI Rules é¡¹ç›®å¼€å‘è§„èŒƒ
description: ä» Git ä»“åº“ç®¡ç† AI è§„åˆ™çš„ VSCode æ‰©å±•é¡¹ç›®ç‰¹å®šè§„èŒƒ
globs: ["**/*.ts", "**/*.tsx", "**/*.md"]
priority: high
tags: [vscode-extension, typescript, vitest, webview, superdesign]
version: 1.0.0
author: ygqygq2
lastUpdated: 2025-12-27
---

# Turbo AI Rules é¡¹ç›®å¼€å‘è§„èŒƒ

## é€‚ç”¨åœºæ™¯

Turbo AI Rules æ‰©å±•å¼€å‘ï¼Œç®¡ç†å¤–éƒ¨ Git ä»“åº“çš„ AI ç¼–ç è§„åˆ™å¹¶ç”Ÿæˆå¤šå·¥å…·é…ç½®

## æ ¸å¿ƒå†…å®¹

åˆ†å±‚æ¶æ„ + é”™è¯¯ç ç³»ç»Ÿ + ç»Ÿä¸€æ—¥å¿— + Vitest å•å…ƒæµ‹è¯• + SuperDesign Webview

## å…³é”®åŸåˆ™

âœ… **æ¯æ¬¡ä»»åŠ¡å‰å»º todolist**  
âœ… ä¸¥æ ¼æ¨¡å¼ï¼Œé¿å… anyï¼ˆå¿…é¡»æ—¶æ³¨é‡ŠåŸå› ï¼‰  
âœ… æ–‡ä»¶ <500 è¡Œï¼ˆç¡¬æ€§ä¸Šé™ 700 è¡Œï¼‰  
âœ… å‡½æ•° <50 è¡Œï¼Œå•ä¸€èŒè´£  
âœ… ç‹¬ç«‹ä»»åŠ¡ç”¨ Promise.all å¹¶è¡Œ  
âœ… è®¾è®¡-ä»£ç -æ–‡æ¡£ä¸‰ä½ä¸€ä½“åŒæ­¥

## é”™è¯¯ç ç³»ç»Ÿï¼ˆå¼ºåˆ¶ï¼‰

### æ ¼å¼

`TAI-{åˆ†ç±»}{åºå·}`ï¼ŒæŒ‚è½½åœ¨ `error.code` æˆ–æ—¥å¿—ä¸Šä¸‹æ–‡

### åˆ†ç±»è¡¨

| åˆ†ç±» | èŒƒå›´ | è¯´æ˜ |
|------|------|------|
| é…ç½®ç±» | TAI-100x | ç¼ºå¤±/æ ¼å¼é”™è¯¯/èŒƒå›´è¶Šç•Œ |
| Git ç±» | TAI-200x | å…‹éš†/æ‹‰å–/é‰´æƒ/åˆ†æ”¯å¼‚å¸¸ |
| è§£æç±» | TAI-300x | frontmatter/MDC/è¯­ä¹‰æ ¡éªŒ |
| ç”Ÿæˆç±» | TAI-400x | æ–‡ä»¶ç”Ÿæˆ/è¦†ç›–/å†™å…¥å¤±è´¥ |
| ç³»ç»Ÿç±» | TAI-500x | IO/æƒé™/è·¯å¾„è¶Šç•Œ/èµ„æºä¸è¶³ |

### ç”¨æˆ·æç¤º

é”™è¯¯ä¿¡æ¯å¿…é¡»åŒ…å« "é—®é¢˜ + å»ºè®®"

```typescript
throw new Error('TAI-2001: å…‹éš†ä»“åº“å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»“åº“ URL æˆ–ç½‘ç»œä»£ç†è®¾ç½®');
```

è¯¦ç»†åˆ—è¡¨è§ `docs/development/01-design.md`

## æ—¥å¿—è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

### ç»Ÿä¸€æ—¥å¿—åº“

`@ygqygq2/vscode-log`ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰

```typescript
import { Logger } from '@ygqygq2/vscode-log';

// extension.ts åˆå§‹åŒ–
const logger = new Logger('TurboAiRules');

// ç»“æ„åŒ–è¾“å‡º
logger.info('Sync start', { sourceId, count });
logger.error('Sync failed', { error, sourceId });
```

### ç­‰çº§é€‰æ‹©

debug/info/warn/errorï¼ŒæŒ‰åœºæ™¯é€‰æ‹©æœ€å°å¯ç”¨ç­‰çº§

### å®‰å…¨è¦æ±‚

**ç¦æ­¢è¾“å‡º** Tokenã€å¯†ç ã€é‚®ç®±ç­‰æ•æ„Ÿä¿¡æ¯

## æ¨¡å—åŒ–æ‹†åˆ†è§„èŒƒ

### æ‹†åˆ†é˜ˆå€¼

- ç¡¬æ€§ä¸Šé™: 700 è¡Œ
- å»ºè®®ä¸Šé™: 500 è¡Œ
- å‡½æ•°/æ–¹æ³•: <50 è¡Œ

### æ‹†åˆ†ç­–ç•¥ï¼ˆä¼˜å…ˆçº§æ’åºï¼‰

1. **æŒ‰èŒè´£æ‹†åˆ†**ï¼ˆé¦–é€‰ï¼‰ï¼šå•ä¸€ç±»èŒè´£è¿‡å¤šæ—¶æ‹†åˆ†ä¸ºå¤šä¸ªç±»
2. **æŒ‰ç±»å‹/æ¥å£æ‹†åˆ†**ï¼šç±»å‹å®šä¹‰è¿‡å¤šæ—¶æŒ‰é¢†åŸŸæ‹†åˆ†
3. **æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†**ï¼šæœåŠ¡ç±» â†’ ä¸»ç±» + è¾…åŠ©ç±»ï¼Œå­ç›®å½•ç»„ç»‡
4. **æŒ‰å±‚çº§æ‹†åˆ†**ï¼šProvider â†’ Provider + Helper + MessageHandler

### æ‹†åˆ†åŸåˆ™

âœ… æ‹†åˆ†å‰æ€è€ƒèŒè´£è¾¹ç•Œ  
âœ… ä½¿ç”¨ `index.ts` ç»Ÿä¸€å¯¼å‡º  
âœ… æ¯ä¸ªæ–‡ä»¶æ¸…æ™°çš„ JSDoc è¯´æ˜èŒè´£  
âŒ ä¸æœºæ¢°æ‹†åˆ†ï¼ˆç ´åé€»è¾‘å®Œæ•´æ€§ï¼‰  
âŒ ä¸è¿‡åº¦æ‹†åˆ†ï¼ˆå•å‡½æ•°ç‹¬ç«‹æˆæ–‡ä»¶ï¼‰  
âŒ ä¸å¾ªç¯ä¾èµ–

## æ³¨é‡Šè§„èŒƒ

### ä¼˜å…ˆä½¿ç”¨æ‰©å±•ç”Ÿæˆ

- **å‡½æ•°æ³¨é‡Š**: turbo-file-header æ‰©å±•ï¼ˆå¿«æ·é”® `ctrl+alt+/`ï¼‰ï¼Œè¡¥å……å‡½æ•°ä½œç”¨è¯´æ˜
- **è°ƒè¯•æ—¥å¿—**: turbo-console-log æ‰©å±•ï¼ˆå¿«æ·é”® `ctrl+alt+l`ï¼‰

### æ³¨é‡Šæ ¼å¼

è¿”å›å€¼ã€å‚æ•°ç”¨ `{type}` æˆ– `{auto}`

```typescript
/**
 * @description ç”Ÿæˆæ–‡ä»¶å†…å®¹
 * @return {string}
 * @param rules {ParsedRule[]}
 */
private generateFileContent(rules: ParsedRule[]): string {
  // ...
}
```

## æµ‹è¯•è¦†ç›–è¦æ±‚

### å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰- ç›®æ ‡ 80%+

**å¿…é¡»è¦†ç›–æ¨¡å—:**
- GitManagerï¼ˆURL éªŒè¯ã€é”™è¯¯å¤„ç†ï¼‰
- MdcParserï¼ˆæœ‰æ•ˆ/æ— æ•ˆ MDC è§£æï¼‰
- RulesManagerï¼ˆç´¢å¼•ã€æœç´¢ã€å†²çªæ£€æµ‹ï¼‰
- FileGeneratorï¼ˆé…ç½®ç”Ÿæˆã€éªŒè¯ï¼‰
- Adaptersï¼ˆæ ¼å¼è½¬æ¢ï¼‰

**æµ‹è¯•æ–‡ä»¶:** `src/test/unit/*.test.ts`

### é›†æˆæµ‹è¯•ï¼ˆMochaï¼‰

**å¿…é¡»è¦†ç›–æµç¨‹:**
- å‘½ä»¤æµç¨‹ï¼ˆaddSourceã€syncRulesã€searchRulesï¼‰
- ç«¯åˆ°ç«¯ï¼ˆæ·»åŠ æº â†’ åŒæ­¥ â†’ ç”Ÿæˆé…ç½®ï¼‰
- UI äº¤äº’ï¼ˆTreeView åˆ·æ–°ã€StatusBar æ›´æ–°ï¼‰

**æµ‹è¯•æ–‡ä»¶:** `src/test/suite/*.spec.ts`

## æ–‡æ¡£ç»„ç»‡è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

å®Œæ•´è§„èŒƒè§ `docs/00-documentation-system.md`ï¼ˆå¼€å‘å‰å¿…è¯»ï¼‰

### ç›®å½•ç»“æ„

```
docs/
â”œâ”€â”€ README.md                        # æ–‡æ¡£ç´¢å¼•
â”œâ”€â”€ 00-documentation-system.md       # æ–‡æ¡£ç»„ç»‡è§„èŒƒï¼ˆå¿…è¯»ç¬¬ä¸€ä¸ªï¼‰
â”œâ”€â”€ 01-overall-design.md             # æ•´ä½“æ¶æ„è®¾è®¡
â”œâ”€â”€ development/                     # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ adapters/                    # å¯¹åº” src/adapters/
â”‚   â”œâ”€â”€ commands/                    # å¯¹åº” src/commands/
â”‚   â”œâ”€â”€ parsers/                     # å¯¹åº” src/parsers/
â”‚   â”œâ”€â”€ providers/                   # å¯¹åº” src/providers/
â”‚   â”œâ”€â”€ services/                    # å¯¹åº” src/services/
â”‚   â”œâ”€â”€ utils/                       # å¯¹åº” src/utils/
â”‚   â”œâ”€â”€ webview/                     # å¯¹åº” src/webview/
â”‚   â””â”€â”€ implementation/              # è·¨æ¨¡å—å®æ–½æ–‡æ¡£
â””â”€â”€ user-guide/                      # ç”¨æˆ·æ–‡æ¡£ï¼ˆæ‰€æœ‰æ–‡ä»¶æœ‰åºå·ï¼‰
```

### è®¾è®¡æ–‡æ¡£è§„èŒƒï¼ˆdocs/development/01-design.mdï¼‰

**åªæè¿° "æ˜¯ä»€ä¹ˆ" å’Œ "ä¸ºä»€ä¹ˆ"ï¼Œä¸åŒ…å«ä»£ç å®ç°**

âœ… å…è®¸: æ¶æ„å›¾ã€æ¦‚å¿µè¯´æ˜ã€æ¨¡å—èŒè´£ã€é…ç½®ç¤ºä¾‹ã€æ•°æ®æµç¨‹  
âŒ ç¦æ­¢: ä»£ç å®ç°ç»†èŠ‚ã€å‡½æ•°å®ç°ã€ä¸šåŠ¡ä»£ç ï¼ˆé™¤éç®—æ³•è¯´æ˜ï¼‰  
ğŸ“ æ›¿ä»£: ä»£ç ç¤ºä¾‹ â†’ æ–‡å­—æè¿°ï¼Œå‡½æ•°å®ç° â†’ è¾“å…¥è¾“å‡ºè¯´æ˜

### UI å®æ–½æ–‡æ¡£å‘½åï¼ˆå¼ºåˆ¶ï¼‰

å¿…é¡»ä¸è®¾è®¡æ–‡æ¡£åºå·å¯¹åº”:

```
è®¾è®¡æ–‡æ¡£: .superdesign/design_docs/01-welcome-page.md
UI åŸå‹: .superdesign/design_iterations/01-welcome-page_1.html
å®æ–½æ–‡æ¡£: docs/development/webview/01-welcome-page-implementation.md
```

æ ¼å¼: `{åºå·}-{ç®€çŸ­åç§°}-implementation.md`

**åˆ›å»ºæ—¶æœº:** å®Œæˆé¡µé¢å®ç°åç«‹å³åˆ›å»º

**å†…å®¹:** HTML åŸå‹ç‰ˆæœ¬ã€Provider å®ç°è¦ç‚¹ã€æ¶ˆæ¯åè®®ã€æµ‹è¯•è¦ç‚¹ã€é—®é¢˜è§£å†³

## SuperDesign AI é›†æˆï¼ˆWebview ä¸“ç”¨ï¼‰

### ä½¿ç”¨åœºæ™¯

âœ… Webview ç•Œé¢è®¾è®¡  
âœ… å“åº”å¼å¸ƒå±€  
âœ… ä¸»é¢˜è‡ªé€‚åº”ï¼ˆ`var(--vscode-*)`ï¼‰  
âœ… å¿«é€ŸåŸå‹è¿­ä»£

### é›†æˆè§„èŒƒ

1. ç»§æ‰¿ `BaseWebviewProvider`
2. ä½¿ç”¨ VSCode CSS å˜é‡ï¼Œä¸ç”¨ç¡¬ç¼–ç é¢œè‰²
3. éµå¾ª `src/providers/BaseWebviewProvider.ts` æ¶æ„
4. è®¾è®¡æ–‡ä»¶å­˜æ”¾ `.superdesign/design_iterations/`

### ä¸‰ä½ä¸€ä½“å¼ºåˆ¶åŒæ­¥ï¼ˆâš ï¸ æå…¶é‡è¦ï¼‰

**æ¯æ¬¡ä¿®æ”¹ Webview å¿…é¡»åŒæ—¶æ›´æ–°:**

1. **è®¾è®¡æ–‡æ¡£** (`.superdesign/design_docs/{åºå·}-{åç§°}.md`)
2. **UI åŸå‹** (`.superdesign/design_iterations/{åºå·}-{åç§°}_{n}.html`)
3. **ä»£ç å®ç°** (React ç»„ä»¶ + æ ·å¼)

**å¼ºåˆ¶è§„åˆ™:**
- âœ… ä¿®æ”¹ä»»ä½•ä¸€ä¸ªï¼Œå¿…é¡»åŒæ—¶æ›´æ–°å…¶ä»–ä¸¤ä¸ª
- âœ… CSS ç±»åã€æ ·å¼å€¼ã€å¸ƒå±€ç­–ç•¥å®Œå…¨ä¸€è‡´
- âœ… ä¸éœ€è¦ç”¨æˆ·æé†’ï¼Œè‡ªåŠ¨å®Œæˆä¸‰æ–‡ä»¶åŒæ­¥
- âŒ ç¦æ­¢åªæ›´æ–°ä»£ç ä¸åŒæ­¥è®¾è®¡

**æ£€æŸ¥æ¸…å•:**
- [ ] è®¾è®¡æ–‡æ¡£å·²æ›´æ–°ï¼ˆCSS è§„èŒƒã€å¸ƒå±€è¯´æ˜ï¼‰
- [ ] UI åŸå‹å·²æ›´æ–°ï¼ˆHTML/CSS ä»£ç ï¼‰
- [ ] ä»£ç å®ç°å·²æ›´æ–°ï¼ˆReact ç»„ä»¶å’Œæ ·å¼ï¼‰
- [ ] ä¸‰è€… CSS ç±»åå®Œå…¨ä¸€è‡´
- [ ] ä¸‰è€…æ ·å¼å€¼å®Œå…¨ä¸€è‡´
- [ ] ä¸‰è€…å¸ƒå±€ç­–ç•¥å®Œå…¨ä¸€è‡´

è¯¦ç»†è§ `docs/development/09-ui-design.md`ã€`08-webview-css-guide.md`ã€`11-codicons-guide.md`

## ä»£ç ç”Ÿæˆæ£€æŸ¥æ¸…å•

ç”Ÿæˆä»£ç å‰ç¡®ä¿:

- [ ] æ‰€æœ‰å¼‚æ­¥å‡½æ•°æœ‰ try-catch é”™è¯¯å¤„ç†
- [ ] é”™è¯¯åŒ…å«é”™è¯¯ç ï¼ˆTAI-xxxxï¼‰
- [ ] ç”¨æˆ·å¯è§é”™è¯¯æœ‰å‹å¥½æç¤ºå’Œå»ºè®®
- [ ] æ—¥å¿—è®°å½•åŒ…å«å…³é”®ä¸Šä¸‹æ–‡ï¼ˆsourceIdã€filePathï¼‰
- [ ] æ•æ„Ÿä¿¡æ¯ï¼ˆtokenï¼‰ä¸å‡ºç°åœ¨æ—¥å¿—
- [ ] è·¯å¾„æ“ä½œå‰å·²éªŒè¯å®‰å…¨æ€§ï¼ˆé˜²ç›®å½•éå†ï¼‰
- [ ] æ‰€æœ‰ç”¨æˆ·è¾“å…¥å·²éªŒè¯ï¼ˆURLã€åˆ†æ”¯åã€è·¯å¾„ï¼‰
- [ ] å¯¼å‡ºå‡½æ•°/ç±»æœ‰ JSDocï¼ˆç”¨ turbo-file-header ç”Ÿæˆï¼‰
- [ ] å˜é‡è°ƒè¯•æ—¥å¿—ç”¨ turbo-console-log ç”Ÿæˆ
- [ ] å¤æ‚é€»è¾‘æœ‰è¡Œå†…æ³¨é‡Š
- [ ] å•ä¸€èŒè´£ï¼Œå‡½æ•° <50 è¡Œ
- [ ] ä½¿ç”¨ async/awaitï¼Œé¿å…å›è°ƒ
- [ ] ç‹¬ç«‹æ“ä½œç”¨ Promise.all å¹¶è¡Œ
- [ ] æ·»åŠ ç›¸åº”å•å…ƒæµ‹è¯•
- [ ] éµå¾ªç°æœ‰å‘½åå’Œç›®å½•çº¦å®š
- [ ] æ–‡ä»¶ <500 è¡Œï¼ˆè¶…è¿‡éœ€æ‹†åˆ†æˆ–æ³¨é‡Šå¿…è¦æ€§ï¼‰
- [ ] æ‹†åˆ†æ¨¡å—æœ‰æ¸…æ™°èŒè´£è¾¹ç•Œ

## æäº¤ä¸å˜æ›´æµç¨‹

### æ—¥å¸¸ç»´æŠ¤æµç¨‹

- **æ–°åŠŸèƒ½**: å…ˆæ›´æ–°è®¾è®¡æ–‡æ¡£ â†’ å®ç°ä»£ç +æµ‹è¯• â†’ åŒæ­¥ç”¨æˆ·æ–‡æ¡£
- **Bug ä¿®å¤**: ç¼–å†™å¤±è´¥æµ‹è¯• â†’ ä¿®å¤ä»£ç  â†’ æ›´æ–°æ–‡æ¡£ï¼ˆå¦‚éœ€è¦ï¼‰
- **é‡æ„**: è¯„ä¼°å½±å“ â†’ æ›´æ–°è®¾è®¡ â†’ é‡æ„å®ç° â†’ åŒæ­¥æ–‡æ¡£

### Commit ç±»å‹

feat, fix, style, perf, refactor, revert, test, docs, chore, workflow, ci, mod, wip, types

### æ–‡æ¡£åŒæ­¥

- è®¾è®¡-ä»£ç -æ–‡æ¡£å¿…é¡»ä¸€è‡´
- ä¿®æ”¹ä»£ç è¡Œä¸ºæ—¶ï¼Œå¿…é¡»åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£
- æ–°å¢åŠŸèƒ½æ—¶ï¼Œå…ˆæ›´æ–°è®¾è®¡æ–‡æ¡£ï¼Œå†å®ç°ä»£ç 

## å‘½åè§„èŒƒ

- **ç±»/æ¥å£**: PascalCaseï¼ˆRuleSourceã€GitManagerï¼‰
- **å‡½æ•°/æ–¹æ³•**: camelCaseï¼ˆcloneRepositoryã€parseRulesï¼‰
- **å¸¸é‡**: UPPER_SNAKE_CASEï¼ˆDEFAULT_CACHE_DIRï¼‰
- **ç§æœ‰æˆå‘˜**: `_cache`
- **æ–‡ä»¶**: PascalCase.tsï¼ˆæœåŠ¡ç±»ï¼‰ã€camelCase.tsï¼ˆå·¥å…·å‡½æ•°ï¼‰ã€types/ ä¸‹ camelCase.ts

## å¯¼å…¥é¡ºåº

Node å†…ç½® â†’ ç¬¬ä¸‰æ–¹ â†’ å†…éƒ¨åˆ«å(@/) â†’ ç›¸å¯¹è·¯å¾„

## æ ¸å¿ƒä¾èµ–

- **simple-git**: Git æ“ä½œ
- **fs-extra**: å¢å¼ºæ–‡ä»¶ç³»ç»Ÿ
- **gray-matter**: è§£æ frontmatter
- **@ygqygq2/vscode-log**: ç»Ÿä¸€æ—¥å¿—

## æ ¸å¿ƒæ•°æ®ç»“æ„

### RuleSourceï¼ˆè§„åˆ™æºé…ç½®ï¼‰

- å”¯ä¸€æ ‡è¯†ï¼ˆidï¼Œkebab-caseï¼‰
- Git ä»“åº“ä¿¡æ¯ï¼ˆgitUrl, branch, subPathï¼‰
- å¯ç”¨çŠ¶æ€å’ŒåŒæ­¥ç­–ç•¥
- è®¤è¯é…ç½®ï¼ˆtoken/ssh/noneï¼‰

### ParsedRuleï¼ˆè§£æåçš„è§„åˆ™ï¼‰

- è§„åˆ™æ ‡è¯†å’Œæ ‡é¢˜
- Markdown å†…å®¹ï¼ˆä¸å« frontmatterï¼‰
- å…ƒæ•°æ®ï¼ˆversion, tags, priority, authorï¼‰
- æ¥æºä¿¡æ¯ï¼ˆsourceId, filePathï¼‰

è¯¦è§ `src/types/`

## æœ€é‡è¦

ä¿®æ”¹/ä¿®å¤ä»£ç åï¼ŒåŠ¡å¿…ç¡®ä¿è®¾è®¡ã€ä»£ç ä¸æ–‡æ¡£ä¸€è‡´ï¼Œå¿…è¦æ—¶ä¿®æ”¹ SuperDesign çš„ HTMLï¼ˆç®€å•ä¿®æ”¹ï¼‰
