# 规则树视图实施要点（RulesTreeProvider）

对应源码：`src/providers/RulesTreeProvider.ts`
目标：直观展示规则源与规则项，提供图标、Tooltip 与快捷操作入口。

## 关键实现

### 规则源状态显示

- **启用/禁用状态**：

  - 图标：启用源使用 `repo-check` 图标（蓝色），禁用源使用 `repo` 图标（灰色）
  - 描述信息：显示启用状态文本（"✅ 已启用" / "❌ 已禁用"） + 分支名
  - Tooltip：详细状态信息，包括仓库 URL、分支、路径等

- **规则选择状态**：
  - 显示已选择规则数/总规则数（如 "12/25 已选"）
  - 全选状态显示特殊标记（"✅ 全部已选"）
  - 未选择任何规则显示提示（"⚠️ 未选择"）

### 规则项显示

- **选择状态**：

  - 已选择的规则：显示 `check` 图标前缀
  - 未选择的规则：正常显示，无特殊标记

- 图标与优先级映射：`ThemeIcon('flame'|'warning'|'info')` + 主题色。
- Tooltip：`MarkdownString` 显示源名称、文件路径、优先级、标签。
- 描述信息：启用状态、分支、标签预览，便于不展开即可获取上下文。
- 刷新策略：数据变化后 300ms 防抖刷新。

## 交互点

- 右键菜单透传到命令（见 `commands/context-menu-implementation.md`）。
- 双击规则项 → 打开原始文件。

## 边界与注意

- 空数据时显示空态文案（避免空白面板）。
- 超长名称截断并在 Tooltip 完整展示。
- MarkdownString 严格转义用户内容，防止 XSS。
