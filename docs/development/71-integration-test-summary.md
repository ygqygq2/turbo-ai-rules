# 71. é›†æˆæµ‹è¯•æ€»ç»“

## æµ‹è¯•ç»„ç»‡

### ç›®å½•ç»“æ„

```
src/test/suite/
â”œâ”€â”€ workflows/          # ç«¯åˆ°ç«¯æµç¨‹ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰
â”œâ”€â”€ scenarios/          # ç‰¹æ®Šåœºæ™¯ï¼ˆ3ä¸ªæµ‹è¯•ï¼‰
â”œâ”€â”€ commands/           # å‘½ä»¤æµ‹è¯•ï¼ˆ1ä¸ªæµ‹è¯•ï¼‰
â””â”€â”€ .temp-disabled-old/ # æ—§æµ‹è¯•ï¼ˆå·²ç¦ç”¨ï¼‰
```

### å·²å®ç°æµ‹è¯•ï¼ˆ10ä¸ªï¼‰

**Workflows (6):**
- cursor-workflow - Cursor å®Œæ•´æµç¨‹ï¼ˆæ·»åŠ æº â†’ åŒæ­¥ â†’ é€‰æ‹© â†’ ç”Ÿæˆï¼‰
- multi-source-workflow - å¤šæºç®¡ç†ã€å†²çªè§£å†³ã€ä¼˜å…ˆçº§
- user-rules-workflow - ç”¨æˆ·è§„åˆ™ä¿æŠ¤ã€block markers
- user-skills-workflow - ç”¨æˆ·æŠ€èƒ½ã€ai-skills/ ç›®å½•ã€skill.md å¤„ç† âœ¨ æ–°å¢
- skills-workflow - Skill é€‚é…å™¨ã€dashboard syncã€skill.md
- rule-selection-workflow - ä¸‰å¤„ UI æ•°æ®åŒæ­¥ï¼ˆsidebar/å³é”®/dashboardï¼‰

**Scenarios (3):**
- workspace-isolation - å·¥ä½œåŒºéš”ç¦»ã€hash è®¡ç®—
- adapter-types - Rule/Skill é€‚é…å™¨åˆ†ç±»
- statusbar - StatusBar ç»Ÿè®¡æ˜¾ç¤º

**Commands (1):**
- source-management - æºç®¡ç†å‘½ä»¤ã€URL éªŒè¯

## å·¥ä½œç©ºé—´åˆ†é…

| å·¥ä½œç©ºé—´ | æµ‹è¯•æ–‡ä»¶ | è¯´æ˜ |
|---------|---------|------|
| **rules-for-cursor** | cursor-workflow<br>source-management | Cursor æµç¨‹<br>æºç®¡ç† |
| **rules-multi-source** | multi-source-workflow | å¤šæºã€å†²çª |
| **rules-with-user-rules** | user-rules-workflow<br>user-skills-workflow | ç”¨æˆ·è§„åˆ™<br>ç”¨æˆ·æŠ€èƒ½ âœ¨ |
| **rules-for-skills** | skills-workflow | Skill é€‚é…å™¨ |
| **rules-for-default** | rule-selection-workflow<br>adapter-types<br>statusbar | è§„åˆ™é€‰æ‹©<br>é€‚é…å™¨åˆ†ç±»<br>çŠ¶æ€æ  |
| **å¤šå·¥ä½œç©ºé—´** | workspace-isolation | éš”ç¦»æµ‹è¯• |

## æµ‹è¯•è¦†ç›–

âœ… åŸºç¡€æµç¨‹ï¼šæ·»åŠ æº â†’ åŒæ­¥ â†’ é€‰æ‹© â†’ ç”Ÿæˆ  
âœ… å¤šæºç®¡ç†ï¼šå†²çªè§£å†³ã€ä¼˜å…ˆçº§ã€åˆå¹¶  
âœ… ç”¨æˆ·è§„åˆ™ï¼šä¿æŠ¤ã€block markers  âœ… ç”¨æˆ·æŠ€èƒ½ï¼šai-skills/ ç›®å½•ã€skill.md å¤„ç†ã€æ¸…ç†ä¿æŠ¤ âœ¨ æ–°å¢  âœ… é€‚é…å™¨ç±»å‹ï¼šRule/Skill åˆ†ç±»ã€dashboard sync  
âœ… UI æ•°æ®åŒæ­¥ï¼šä¸‰å¤„ UI å…±äº«æ•°æ®  
âœ… å·¥ä½œç©ºé—´éš”ç¦»ï¼šhashã€æ•°æ®ç‹¬ç«‹  
âœ… StatusBarï¼šç»Ÿè®¡æ˜¾ç¤º

## è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
pnpm test:suite:mocha

# è¿è¡Œå•ä¸ªå·¥ä½œæµ
pnpm test:suite:mocha -- --grep "Cursor workflow"

# è¿è¡Œç‰¹å®šåœºæ™¯
pnpm test:suite:mocha -- --grep "Workspace isolation"
```

## å…³é”®åŸåˆ™

1. **ä¸€æµ‹è¯•ä¸€ç©ºé—´**ï¼šæ¯ä¸ªæµ‹è¯•æ–‡ä»¶å›ºå®šä¸€ä¸ªå·¥ä½œç©ºé—´
2. **æ¨¡æ‹Ÿ UI æ“ä½œ**ï¼šé€šè¿‡æ•°æ®æŒä¹…åŒ–æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»
3. **çœŸå®åœºæ™¯**ï¼šç«¯åˆ°ç«¯æµç¨‹ï¼Œé¿å…è¿‡åº¦ mock
4. **æ¸…ç†çŠ¶æ€**ï¼šæ¯ä¸ªæµ‹è¯•ç‹¬ç«‹ï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•


âœ… **ç”¨æˆ·è§„åˆ™ä¿æŠ¤**:
- ç”¨æˆ·å†…å®¹ä¿ç•™
- å¤šé€‚é…å™¨åŒæ—¶å¯ç”¨
- å—æ ‡è®°æ­£ç¡®æ€§
- æ›´æ–°ä¸è¦†ç›–ç”¨æˆ·è§„åˆ™

âœ… **å·¥ä½œç©ºé—´éš”ç¦»**:
- å·¥ä½œç©ºé—´å“ˆå¸Œ
- æ•°æ®éš”ç¦»
- æŒä¹…åŒ–åˆ°æ­£ç¡®ç›®å½•

âœ… **å‘½ä»¤åŠŸèƒ½**:
- æ·»åŠ /åˆ é™¤æº
- å¯ç”¨/ç¦ç”¨æº
- URL éªŒè¯
- é…ç½®æŒä¹…åŒ–

### å¾…å®ç°çš„æµ‹è¯•ï¼ˆåŸºäºæ—§æµ‹è¯•è¿ç§»ï¼‰

â³ **é€‚é…å™¨å·¥ä½œæµ**:
- [ ] copilot-workflow.test.ts (Copilot é€‚é…å™¨å®Œæ•´æµç¨‹)
- [ ] continue-workflow.test.ts (Continue é€‚é…å™¨å®Œæ•´æµç¨‹)
- [ ] default-workflow.test.ts (é»˜è®¤é€‚é…å™¨ + rules/ ç›®å½•)
- [ ] skills-workflow.test.ts (æŠ€èƒ½é€‚é…å™¨)
- [ ] shared-selection-workflow.test.ts (å…±äº«é€‰æ‹©)


## åç»­è®¡åˆ’

### å…¶ä»–é€‚é…å™¨æµç¨‹ï¼ˆå¯é€‰ï¼‰
- copilot-workflow.test.ts
- continue-workflow.test.ts  
- default-workflow.test.ts

### é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
- error-handling.test.ts
- performance.test.ts
- custom-adapters.test.ts

### æ¸…ç†éªŒè¯
- åˆ é™¤ .temp-disabled-old/ æ—§æ–‡ä»¶
- è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- éªŒè¯è¦†ç›–ç‡

4. **æ›´å¿«çš„è°ƒè¯•**: é—®é¢˜å®šä½æ›´å®¹æ˜“
5. **æ›´çœŸå®çš„æµ‹è¯•**: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œæµç¨‹

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é›†æˆæµ‹è¯•è®¾è®¡æ–¹æ¡ˆ](70-integration-test-design.md)
- [é›†æˆæµ‹è¯•å‚è€ƒ](72-integration-test-reference.md)
- [æµ‹è¯•æŒ‡å—](../../sampleWorkspace/TESTING_GUIDE.md)
- [æµ‹è¯•è¦†ç›–ç‡åˆ†æ](61-unit-test-coverage-analysis.md)

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¸è¦åœ¨æµ‹è¯•ä¸­åˆ‡æ¢å·¥ä½œç©ºé—´**: æ¯ä¸ªæµ‹è¯•æ–‡ä»¶å›ºå®šåœ¨ä¸€ä¸ªå·¥ä½œç©ºé—´
2. **æ¨¡æ‹Ÿ UI æ“ä½œ**: é€šè¿‡æ•°æ®å±‚é¢æ¨¡æ‹Ÿ UI æ“ä½œç»“æœ
3. **æ¸…ç†æµ‹è¯•æ•°æ®**: æ¯ä¸ªæµ‹è¯•åè¦æ¸…ç†è‡ªå·±çš„æ•°æ®
4. **çœŸå®åœºæ™¯ä¼˜å…ˆ**: æµ‹è¯•åº”è¯¥åæ˜ çœŸå®çš„ç”¨æˆ·æ“ä½œæµç¨‹
5. **å·¥ä½œç©ºé—´å¤ç”¨**: å¤šä¸ªæµ‹è¯•æ–‡ä»¶å¯ä»¥å…±äº«åŒä¸€ä¸ªå·¥ä½œç©ºé—´ï¼Œä½†è¦ç¡®ä¿äº’ä¸å¹²æ‰°

## ğŸ‰ å·²éªŒè¯

- âœ… æ–°æµ‹è¯•æ–‡ä»¶ç¼–è¯‘é€šè¿‡
- âœ… ç±»å‹å®šä¹‰æ­£ç¡®
- âœ… ç›®å½•ç»“æ„æ¸…æ™°
- âœ… æ–‡æ¡£å·²æ›´æ–°
