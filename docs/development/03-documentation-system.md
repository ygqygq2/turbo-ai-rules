# 文档同步规范

> 本文档说明项目文档体系的组织结构和同步维护原则

## 核心原则

**设计-代码-文档三者同步**：确保架构设计、代码实现和文档说明保持一致。

### 同步流程

1. **设计阶段**：在设计文档中描述架构和实现方案
2. **开发阶段**：按设计文档实现代码，保持一致性
3. **文档阶段**：更新用户文档和开发文档，反映实际实现

### 维护原则

- 任何功能变更必须同步更新相关文档
- 重构代码时检查并更新设计文档
- 新增功能时创建对应的文档章节
- 定期检查文档与代码的一致性

## 文档体系结构

### 项目根目录文档

#### README.md（用户指南）

**目标读者**：最终用户、快速上手者

**内容要点**：

- 功能特性列表
- 快速开始指南
- 基本使用说明
- 常见问题解答
- 工作原理概述
- 目录结构说明

**维护要点**：

- 新增功能时更新特性列表
- 重大变更时更新快速开始步骤
- 用户反馈的问题添加到 FAQ

#### CONTRIBUTING.md（贡献指南）

**目标读者**：开源贡献者、协作开发者

**内容要点**：

- 贡献方式说明
- 开发环境搭建
- 代码规范要求
- 提交信息规范（Conventional Commits）
- Pull Request 流程
- 测试要求

**维护要点**：

- 代码规范变更时同步更新
- 新增贡献方式时补充说明
- 工作流程优化时更新步骤

#### CHANGELOG.md（变更日志）

**目标读者**：用户、开发者

**内容格式**：

- 按版本组织
- 分类：新增功能、功能优化、Bug 修复、文档更新
- 每条变更使用简洁的描述

**维护要点**：

- 每次发布前整理变更内容
- 使用统一的格式和术语
- 突出重大变更和破坏性变更

### docs/ 目录文档

#### docs/README.md（文档索引）

**目标读者**：所有文档使用者

**内容要点**：

- 文档分类导航
- 快速链接
- 各文档的定位说明

**维护要点**：

- 新增文档时添加导航链接
- 定期检查链接有效性

#### docs/development/\*.md（开发文档）

**01-design.md（架构设计）**

- 目标读者：架构师、高级开发者
- 内容：设计理念、架构决策、技术选型
- 更新时机：架构变更、设计重构

**02-development.md（开发指南）**

- 目标读者：新开发者
- 内容：环境搭建、开发流程、测试方法
- 更新时机：工具变更、流程优化

**03-maintaining.md（维护指南）**

- 目标读者：项目维护者
- 内容：同步流程、故障排查、发布流程
- 更新时机：维护流程变更

**04-custom-adapters-design.md（自定义适配器设计）**

- 目标读者：适配器开发者
- 内容：适配器接口、实现示例
- 更新时机：适配器系统变更

**07-ui-design.md（UI 设计）**

- 目标读者：UI 开发者
- 内容：UI 架构、组件设计、交互规范
- 更新时机：UI 功能变更

**08-ui-phase1-implementation.md（UI Phase 1 实现）**

- 目标读者：接手开发者
- 内容：树视图、状态栏、右键菜单的实现细节
- 更新时机：Phase 1 功能修改

**08-ui-phase2-implementation.md（UI Phase 2 实现）**

- 目标读者：接手开发者
- 内容：Webview 架构、消息协议、性能优化
- 更新时机：Phase 2 功能修改

**09-ui-phase3-design.md（UI Phase 3 设计）**

- 目标读者：架构师、开发者
- 内容：高级搜索和批量操作的架构设计
- 更新时机：Phase 3 架构变更

**10-ui-phase3-implementation.md（UI Phase 3 实现）**

- 目标读者：接手开发者
- 内容：SearchWebview 和批量操作的实现细节
- 更新时机：Phase 3 功能修改

#### docs/user-guide/\*.md（用户文档）

**01-commands.md / 01-commands.zh.md（命令说明）**

- 目标读者：用户
- 内容：所有命令的详细说明和使用示例
- 更新时机：新增命令、命令行为变更

**02-configuration.md / 02-configuration.zh.md（配置说明）**

- 目标读者：用户
- 内容：配置项详解、配置示例
- 更新时机：新增配置、配置格式变更

**03-rule-format.md / 03-rule-format.zh.md（规则格式）**

- 目标读者：规则作者
- 内容：规则文件格式规范、示例
- 更新时机：规则格式变更

**04-faq.md / 04-faq.zh.md（常见问题）**

- 目标读者：用户
- 内容：常见问题和解决方案
- 更新时机：发现新问题、解决方案更新

## 文档同步检查清单

### 新增功能时

- [ ] 更新 `README.md` 特性列表
- [ ] 更新 `CHANGELOG.md` [Unreleased] 版本
- [ ] 更新相关用户文档（命令/配置/FAQ）
- [ ] 创建或更新设计文档（如有架构变更）
- [ ] 创建或更新实现文档（技术细节）
- [ ] 添加示例到 `sampleWorkspace`
- [ ] 更新相关测试文档

### 重构代码时

- [ ] 检查设计文档是否需要更新
- [ ] 更新实现文档中的技术细节
- [ ] 更新 API 文档（如有公开接口变更）
- [ ] 更新测试文档

### 修复 Bug 时

- [ ] 更新 `CHANGELOG.md` Bug 修复记录
- [ ] 检查 FAQ 是否需要新增问题
- [ ] 更新相关用户文档（如有行为变更）

### 发布版本时

- [ ] 整理 `CHANGELOG.md` [Unreleased] 为具体版本
- [ ] 检查所有文档链接有效性
- [ ] 验证示例代码可用性
- [ ] 更新版本号相关文档

## 文档质量标准

### 技术文档要求

1. **结构清晰**：使用标准的 Markdown 标题层级
2. **代码示例**：所有代码示例可运行且正确
3. **链接有效**：内部链接和外部链接均有效
4. **术语统一**：技术术语在文档中保持一致
5. **无时间信息**：避免使用"今天"、"本周"等会过时的表述

### 用户文档要求

1. **易理解**：面向非技术用户，避免过多技术术语
2. **图文并茂**：适当使用截图、图表辅助说明
3. **示例完整**：提供完整的配置和使用示例
4. **中英文同步**：中英文文档内容保持同步

## 文档审核流程

### Pull Request 检查

提交包含文档变更的 PR 时，确认：

1. **变更范围**：文档变更与代码变更相匹配
2. **格式正确**：Markdown 语法正确，渲染效果良好
3. **链接有效**：新增的链接可访问
4. **示例可用**：代码示例已验证可运行
5. **中英文同步**：如修改中文文档，英文文档也需更新

### 定期审核

建议每季度进行文档审核：

1. **内容准确性**：验证文档与当前代码实现一致
2. **链接有效性**：检查所有外部链接
3. **示例更新**：验证示例代码在最新版本可运行
4. **用户反馈**：根据 Issue/Discussion 更新 FAQ

## 文档工具和自动化

### 推荐工具

- **Markdown Linter**：markdownlint 检查语法
- **链接检查**：markdown-link-check 验证链接
- **拼写检查**：cSpell 检查拼写错误
- **文档网站**：VitePress 或 Docusaurus（未来）

### 自动化检查

建议在 CI 中集成：

- Markdown 语法检查
- 链接有效性检查
- 拼写检查（英文文档）

## 文档演进路线

### 已完成

- 基础文档体系建立
- 用户文档和开发文档分离
- 中英文文档支持
- 设计和实现文档分离

### 近期计划

- 添加更多示例和最佳实践
- 建立文档 CI 自动化检查
- 完善 API 文档（TypeDoc）

### 长期规划

- 建立文档网站
- 添加视频教程
- 建立社区贡献的文档库
- API 文档自动生成

## 相关资源

**文档工具**：

- [Markdown Guide](https://www.markdownguide.org/)
- [VitePress](https://vitepress.dev/)
- [markdownlint](https://github.com/DavidAnson/markdownlint)

**文档规范**：

- [Microsoft Writing Style Guide](https://learn.microsoft.com/en-us/style-guide/welcome/)
- [Google Developer Documentation Style Guide](https://developers.google.com/style)

---

**维护说明**：本文档描述项目文档体系的组织结构和维护原则，当文档体系有重大变化时需要更新。
